(function(){"use strict";var t={4749:function(t,e,n){var r=n(538),i=n(629),o=n(3511),a=n(4622),s=n(3145),l=n(1003),c=n(2357),u=(n(8413),n(4670)),d=n(7536),f=function(){var t=this,e=t._self._c;return e("div",{staticClass:"stickyNav"},[e("div",{staticClass:"container"},[e("div",{staticClass:"stickyNav__nav"},[t.navItems.length>1?e("div",{staticClass:"stickyNav__links"},t._l(t.navItems,(function(n,r){return e("a",{key:n.fieldset,class:{"s--on":n.active},attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.scrollToFieldset(r)}}},[t._v(t._s(n.label))])})),0):t._e(),t._t("title")],2),e("div",{staticClass:"stickyNav__actions"},[t._t("actions")],2)])])},p=[],v=n(3279),h=n.n(v),m=n(5068),b={name:"A17StickyNav",props:{items:{type:Array,default:function(){return[]}}},data:function(){return{lastScrollPos:0,topOffset:70,ticking:!1,navItems:this.items,clickedFieldset:-1,fieldset:[]}},methods:{getFieldsetPosition:function(){var t=this;this.lastScrollPos=window.pageYOffset,this.navItems.forEach((function(e,n){var i=t.fieldset[n],o=i?i.getBoundingClientRect().top+t.lastScrollPos:0;r.ZP.set(e,"position",o)}))},setActiveItems:function(){var t=this,e=0;this.navItems.forEach((function(n,i){var o=n.position-t.topOffset<t.lastScrollPos;r.ZP.set(n,"active",!1),o&&i>0&&(e=i)})),this.clickedFieldset>=0?r.ZP.set(t.navItems[t.clickedFieldset],"active",!0):void 0!==t.navItems[e]&&r.ZP.set(t.navItems[e],"active",!0)},refresh:function(){var t=this;t.clickedFieldset=-1,this.getFieldsetPosition(),this.setActiveItems(),t.ticking=!1},_resize:h()((function(){this.lastScrollPos=window.pageYOffset,this.refresh()}),200),_scroll:function(){var t=this;this.lastScrollPos=window.pageYOffset,t.ticking||window.requestAnimationFrame((function(){t.refresh(),t.ticking=!1})),t.ticking=!0},scrollToFieldset:function(t){var e=this,n=this.navItems[t].position-this.topOffset+1;this.dispose(),this.clickedFieldset=t,this.getFieldsetPosition(),this.setActiveItems(),(0,m.Z)({offset:n,easing:"easeOut",onComplete:function(){e.init()}})},init:function(){window.addEventListener("scroll",this._scroll),window.addEventListener("resize",this._resize)},dispose:function(){window.removeEventListener("scroll",this._scroll),window.removeEventListener("resize",this._resize)}},mounted:function(){var t=this;this.navItems.forEach((function(e,n){var r=document.querySelector("#"+e.fieldset);r?t.fieldset.push(r):t.fieldset.push(null)})),this.refresh(),this.init()},beforeDestroy:function(){this.dispose()}},y=b,g=n(1001),_=(0,g.Z)(y,f,p,!1,null,"c3e98050",null),w=_.exports,O=function(){var t=this,e=t._self._c;return e("div",{staticClass:"titleEditor",class:t.titleEditorClasses},[e("div",{staticClass:"titleEditor__preview"},[e("h2",{staticClass:"titleEditor__title",class:{"titleEditor__title-only":!t.permalink}},[t.editableTitle?e("a",{staticClass:"titleEditor__title-wrapper",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.$refs.editModal.open()}}},[t.thumbnail?e("a17-avatar",{attrs:{name:t.title,thumbnail:t.thumbnail}}):t._e(),e("span",{staticClass:"titleEditor__title"},[e("span",{staticClass:"f--underlined--o"},[t._v(t._s(t.title))]),t._v(" "),e("span",{directives:[{name:"svg",rawName:"v-svg"}],attrs:{symbol:"edit"}})])],1):e("span",{staticClass:"titleEditor__title-wrapper"},[t.thumbnail?e("a17-avatar",{attrs:{name:t.title,thumbnail:t.thumbnail}}):t._e(),e("span",{staticClass:"titleEditor__title"},[t._v(" "+t._s(t.customTitle?t.customTitle:t.title)+" ")])],1)]),!t.permalink&&!t.customPermalink||t.showModal?t._e():e("a",{staticClass:"titleEditor__permalink f--small",attrs:{href:t.fullUrl,target:"_blank"}},[e("span",{staticClass:"f--note f--external f--underlined--o"},[t._v(t._s(t._f("prettierUrl")(t.visibleUrl)))])]),t.showModal?e("span",{staticClass:"titleEditor__permalink f--small f--note f--external f--underlined--o"},[t._v(t._s(t._f("prettierUrl")(t.visibleUrl)))]):t._e(),e("a17-modal",{ref:"editModal",staticClass:"modal--form",attrs:{title:t.modalTitle,forceLock:t.disabled}},[e("a17-langmanager",{attrs:{"control-publication":t.controlLanguagesPublication}}),e("form",{ref:"modalForm",attrs:{action:"#"},on:{submit:function(e){return e.preventDefault(),t.update.apply(null,arguments)}}},[t._t("modal-form"),e("a17-modal-validation",{attrs:{mode:t.mode},on:{disable:t.lockModal}})],2)],1)],1),t._t("default")],2)},k=[],S=n(2279),P=n(8193),E=n(2674),C=n(6830),L=n(8348),x=n(1633);function D(t){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},D(t)}function j(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function T(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?j(Object(n),!0).forEach((function(e){A(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function A(t,e,n){return e=I(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function I(t){var e=B(t,"string");return"symbol"===D(e)?e:String(e)}function B(t,e){if("object"!==D(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==D(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var R={name:"A17TitleEditor",mixins:[C.Z,L.Z],components:{"a17-avatar":S.Z,"a17-modal-validation":E.Z,"a17-langmanager":P.Z},props:{modalTitle:{type:String,default:function(){return this.$trans("modal.update.title")}},warningMessage:{type:String,default:"Missing title"},thumbnail:{type:String,default:""},showModal:{type:Boolean,default:!1},name:{default:"title"},editableTitle:{type:Boolean,default:!0},controlLanguagesPublication:{type:Boolean,default:!0},customTitle:{type:String,default:""},customPermalink:{type:String,default:""},localizedPermalinkbase:{type:String,default:""},localizedCustomPermalink:{type:String,default:""}},data:function(){return{disabled:!1}},mounted:function(){this.showModal&&this.$refs.editModal.open()},computed:T(T({titleEditorClasses:function(){return{"titleEditor--error":this.error||this.title===this.warningMessage}},mode:function(){return this.showModal?"done":this.title.length>0?"update":"create"},fullUrl:function(){return this.customlink||this.baseUrl.replace("{language}",this.currentLocale.value).replace("{preview}/",this.published?"":"admin-preview/")+this.permalink},visibleUrl:function(){return this.customlink||this.baseUrl.replace("{language}",this.currentLocale.value).replace("{preview}/","")+this.permalink},title:function(){var t=this.fieldValueByName(this.name)?this.fieldValueByName(this.name):"",e="string"===typeof t?t:t[this.currentLocale.value];return e||this.warningMessage},customlink:function(){var t=this.localizedCustomPermalink.length>0?JSON.parse(this.localizedCustomPermalink):{};return Object.keys(t).length>0?t[this.currentLocale.value]:!!this.customPermalink&&this.customPermalink},permalink:function(){var t=this.localizedPermalinkbase.length>0?JSON.parse(this.localizedPermalinkbase):{};return Object.keys(t).length>0&&this.currentLocale.value in t?t[this.currentLocale.value].concat("/",this.fieldValueByName("slug")[this.currentLocale.value]):this.fieldValueByName("slug")[this.currentLocale.value]}},(0,i.rn)({baseUrl:function(t){return t.form.baseUrl},currentLocale:function(t){return t.language.active},languages:function(t){return t.language.all},fields:function(t){return t.form.fields},published:function(t){return t.publication.published}})),(0,i.Se)(["fieldValueByName"])),filters:x.Z,methods:{update:function(){this.$refs.editModal.hide()},lockModal:function(t){this.disabled=t}}},N=R,$=(0,g.Z)(N,O,k,!1,null,"0aa96d21",null),V=$.exports,F=n(4884),M=function(){var t=this,e=t._self._c;return e("div",{staticClass:"publisher__wrapper"},[t.withPublicationToggle?e("a17-switcher",{attrs:{title:t.$trans("publisher.switcher-title","Status"),name:"publish_state",textEnabled:t.textEnabled,textDisabled:t.textDisabled,"text-scheduled":t.textScheduled,"text-expired":t.textExpired}}):t._e(),t._t("default"),t.userInfo?e("a17-userinfo",{attrs:{userInfo:t.userInfo}}):t._e(),t.reviewProcess&&t.reviewProcess.length?e("a17-reviewaccordion",{attrs:{options:t.reviewProcess,name:"review_process",value:t.reviewProcessCompleteValues,open:t.openStates["A17Reviewaccordion"]},on:{open:t.openCloseAccordion}},[t._v(t._s(t.$trans("publisher.review-status")))]):t._e(),t.visibility&&t.visibilityOptions&&t.visibilityOptions.length?e("a17-radioaccordion",{attrs:{radios:t.visibilityOptions,name:"visibility",value:t.visibility,open:t.openStates["A17Radioaccordion"]},on:{open:t.openCloseAccordion,change:t.updateVisibility}},[t._v(t._s(t.$trans("publisher.visibility")))]):t._e(),t.languages&&t.showLanguages&&t.languages.length>1?e("a17-checkboxaccordion",{attrs:{options:t.languages,name:"active_languages",value:t.publishedLanguagesValues,open:t.openStates["A17Checkboxaccordion"]},on:{open:t.openCloseAccordion}},[t._v(t._s(t.$trans("publisher.languages")))]):t._e(),t.withPublicationTimeframe?e("a17-pubaccordion",{attrs:{"date-display-format":t.localizedDateDisplayFormat,"date-format":t.dateFormat,date_24h:t.date_24h,open:t.openStates["A17Pubaccordion"]},on:{open:t.openCloseAccordion}},[t._v(t._s(t.$trans("publisher.published-on")))]):t._e(),t.revisions.length?e("a17-revaccordion",{attrs:{open:t.openStates["A17Revisions"],revisions:t.revisions},on:{open:t.openCloseAccordion}},[t._v(t._s(t.$trans("publisher.revisions")))]):t._e(),t.parents.length?e("a17-parentaccordion",{attrs:{open:t.openStates["A17Parents"],parents:t.parents,value:t.parentId},on:{open:t.openCloseAccordion}},[t._v(t._s(t.$trans("publisher.parent-page")))]):t._e(),t.revisions.length?e("div",{staticClass:"publisher__item"},[e("a",{staticClass:"publisher__link",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.openPreview.apply(null,arguments)}}},[e("span",{directives:[{name:"svg",rawName:"v-svg"}],attrs:{symbol:"preview"}}),e("span",{staticClass:"f--link-underlined--o"},[t._v(t._s(t.$trans("publisher.preview")))])])]):t._e(),e("div",{staticClass:"publisher__item publisher__item--btns"},[e("a17-multibutton",{attrs:{options:t.submitOptions,type:"submit",message:t.submitDisableMessage},on:{"button-clicked":t.buttonClicked}})],1)],2)},Z=[],U=function(){var t=this,e=t._self._c;return e("a17-accordion",{attrs:{open:t.open},on:{toggleVisibility:t.notifyOpen}},[e("span",{attrs:{slot:"accordion__title"},slot:"accordion__title"},[t._t("default")],2),e("div",{attrs:{slot:"accordion__value"},slot:"accordion__value"},[t._v(t._s(t.currentLabel))]),e("a17-checkboxgroup",{attrs:{name:t.name,options:t.options,selected:t.currentValue,min:1},on:{change:t.changeValue}})],1)},z=[],W=n(9996),G=function(){var t=this,e=t._self._c;return e("div",{staticClass:"accordion",class:t.visibilityClasses},[e("button",{staticClass:"accordion__trigger",attrs:{type:"button","aria-expanded":t.visible?"true":"false"},on:{click:t.onClickVisibility}},[t._t("accordion__title"),e("span",{staticClass:"accordion__value"},[t._t("accordion__value")],2),e("span",{directives:[{name:"svg",rawName:"v-svg"}],attrs:{symbol:"dropdown_module"}})],2),e("transition",{attrs:{css:!1,duration:275},on:{"before-enter":t.beforeEnter,"before-leave":t.beforeLeave,enter:t.enter,leave:t.leave}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"accordion__dropdown",attrs:{"aria-hidden":!t.visible}},[e("div",{staticClass:"accordion__list"},[t._t("default")],2)])])],1)},Y=[],q={name:"A17Accordion",mixins:[W.Z],watch:{open:function(){this.visible!==this.open&&(this.visible=this.open)}},methods:{getMaxHeight:function(){return Math.min(250,this.$el.querySelector(".accordion__list").clientHeight+1)},beforeEnter:function(t){t.style.maxHeight="0px"},enter:function(t,e){t.style.maxHeight=this.getMaxHeight()+"px"},beforeLeave:function(t,e){t.style.maxHeight=this.getMaxHeight()+"px"},leave:function(t,e){t.style.maxHeight="0px"}}},H=q,K=(0,g.Z)(H,G,Y,!1,null,"0dd10376",null),J=K.exports,X={name:"A17Checkboxaccordion",components:{"a17-accordion":J},mixins:[W.Z],props:{value:{default:function(){return[]}},title:{type:String,default:""},name:{type:String,default:""},options:{default:function(){return[]}}},data:function(){return{currentValue:this.value}},watch:{value:function(t){this.currentValue=t}},computed:{currentLabel:function(){return this.currentValue.length+" "+this.$trans("publisher.languages-published")}},methods:{changeValue:function(t){this.currentValue=t,this.$store.commit(a.ad.PUBLISH_LANG,t)},notifyOpen:function(t){this.$emit("open",t,this.$options.name)}}},Q=X,tt=(0,g.Z)(Q,U,z,!1,null,null,null),et=tt.exports,nt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"multibutton"},[e("a17-dropdown",{ref:"submitDown",attrs:{position:"bottom-right",width:"full",offset:0}},[t.isDisabled(t.options[0])?e("a17-button",{attrs:{type:"button",variant:"validate",disabled:!0}},[t._v(t._s(t.options[0].text))]):e("a17-button",{attrs:{type:t.type,name:t.options[0].name,variant:"validate"},on:{click:function(e){return t.buttonClicked(t.options[0].name)}}},[t._v(t._s(t.options[0].text))]),t.otherOptions.length?[t.hasValidOptions?e("button",{staticClass:"multibutton__trigger",attrs:{type:"button"},on:{click:function(e){return t.$refs.submitDown.toggle()}}},[e("span",{directives:[{name:"svg",rawName:"v-svg"}],attrs:{symbol:"dropdown_module"}})]):t._e(),e("div",{attrs:{slot:"dropdown__content"},slot:"dropdown__content"},[e("ul",t._l(t.otherOptions,(function(n){return e("li",{key:n.name},[t.isDisabled(n)?e("button",{attrs:{type:"button",disabled:""}},[t._v(t._s(n.text))]):e("button",{attrs:{type:t.type,name:n.name},on:{click:function(e){return t.buttonClicked(n.name)}}},[t._v(t._s(n.text))])])})),0)])]:t._e()],2)],1)},rt=[],it={name:"A17Multibutton",props:{type:{default:"button"},message:{type:String,default:""},options:{default:function(){return[]}}},data:function(){return{}},computed:{otherOptions:function(){return this.options.length?this.options.slice(1):[]},hasValidOptions:function(){var t=this.options.filter((function(t){return!t.hasOwnProperty("disabled")||!1===t.disabled})),e=Boolean(t.length>0);return!e&&this.message&&this.$store.commit(a.qq.SET_NOTIF,{message:this.message,variant:"success"}),e}},methods:{isDisabled:function(t){return!!t.hasOwnProperty("disabled")&&!0===t.disabled},buttonClicked:function(t){this.$emit("button-clicked",t)}}},ot=it,at=(0,g.Z)(ot,nt,rt,!1,null,"58557532",null),st=at.exports,lt=function(){var t=this,e=t._self._c;return e("a17-accordion",{attrs:{open:t.open},on:{toggleVisibility:t.notifyOpen}},[e("span",{attrs:{slot:"accordion__title"},slot:"accordion__title"},[t._t("default")],2),e("div",{attrs:{slot:"accordion__value"},domProps:{innerHTML:t._s(t.currentLabel)},slot:"accordion__value"}),e("div",{staticClass:"accordion__fields"},[e("a17-select",{attrs:{name:"parent_id",options:t.options,selected:t.currentValue,size:"small"},on:{change:t.updateSelected}})],1)])},ct=[];function ut(t,e){var n=[];function r(t){return Array(t+1).join(e)+" "}function i(t,e){t.forEach((function(t){var o={};if(o.value=t.id,t.edit&&(o.edit=t.edit),o.label=r(e)+t.name,n.push(o),t.children&&t.children.length){var a=e+1;i(t.children,a)}}))}return i(t,0),n}function dt(t){return dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dt(t)}function ft(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function pt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ft(Object(n),!0).forEach((function(e){vt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ft(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function vt(t,e,n){return e=ht(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ht(t){var e=mt(t,"string");return"symbol"===dt(e)?e:String(e)}function mt(t,e){if("object"!==dt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==dt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var bt={name:"A17Parents",components:{"a17-accordion":J},mixins:[W.Z],props:{value:{default:0},parents:{default:function(){return[]}}},computed:pt({currentLabel:function(){var t=this.options.filter(this.isSameValue);return t.length?t[0].label:""},options:function(){var t=ut(this.parents,"&nbsp;&nbsp;&nbsp;"),e={value:0,label:"(No parent)"};return t.unshift(e),t}},(0,i.rn)({currentValue:function(t){return t.parents.active}})),methods:{isSameValue:function(t){return t.value===this.currentValue},updateSelected:function(t){this.$store.commit(a.Lp.UPDATE_PARENT,t)},notifyOpen:function(t){this.$emit("open",t,this.$options.name)}}},yt=bt,gt=(0,g.Z)(yt,lt,ct,!1,null,"606c5ad8",null),_t=gt.exports,wt=function(){var t=this,e=t._self._c;return e("a17-accordion",{attrs:{open:t.open},on:{toggleVisibility:t.notifyOpen}},[e("span",{attrs:{slot:"accordion__title"},slot:"accordion__title"},[t._t("default")],2),e("div",{attrs:{slot:"accordion__value"},slot:"accordion__value"},[t.startDate?[t._v(" "+t._s(t._f("formatDateWithFormat")(t.startDateForDisplay,t.localizedDateDisplayFormat))+" ")]:[t._v(" "+t._s(t.defaultStartDate)+" ")]],2),e("div",{staticClass:"accordion__fields"},[e("a17-datepicker",{attrs:{name:"publish_date","place-holder":t.$trans("publisher.start-date"),time_24hr:t.date_24h,altFormat:t.dateFormat,initialValue:t.startDate,maxDate:t.endDate,enableTime:!0,allowInput:!1,staticMode:!0,clear:!0},on:{open:t.openStartCalendar,close:t.closeCalendar,input:t.updateStartDate}}),e("a17-datepicker",{attrs:{name:"end_date","place-holder":t.$trans("publisher.end-date"),time_24hr:t.date_24h,altFormat:t.dateFormat,initialValue:t.endDate,minDate:t.startDate,enableTime:!0,allowInput:!1,staticMode:!0,clear:!0},on:{open:t.openEndCalendar,close:t.closeCalendar,input:t.updateEndDate}})],1)])},Ot=[],kt=n(1884),St=n.n(kt),Pt=n(4293);function Et(t){return Et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Et(t)}function Ct(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Lt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ct(Object(n),!0).forEach((function(e){xt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ct(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function xt(t,e,n){return e=Dt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Dt(t){var e=jt(t,"string");return"symbol"===Et(e)?e:String(e)}function jt(t,e){if("object"!==Et(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==Et(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var Tt={name:"A17Pubaccordion",components:{"a17-accordion":J},mixins:[W.Z],props:{defaultStartDate:{type:String,default:function(){return this.$trans("publisher.immediate")}},defaultEndDate:{type:String,default:""},dateDisplayFormat:{type:String,default:null},dateFormat:{type:String,default:null},date_24h:{type:Boolean,default:(0,Pt.aq)()}},filters:x.Z,computed:Lt(Lt({},(0,i.rn)({startDate:function(t){return t.publication.startDate},endDate:function(t){return t.publication.endDate}})),{},{startDateForDisplay:function(){return St()(this.startDate+"Z").toISOString()},localizedDateDisplayFormat:function(){return this.dateDisplayFormat?this.dateDisplayFormat:"MMM, DD, YYYY, "+(0,Pt.rA)(this.date_24h)}}),methods:{updateStartDate:function(t){this.$store.commit(a.V1.UPDATE_PUBLISH_START_DATE,t)},updateEndDate:function(t){this.$store.commit(a.V1.UPDATE_PUBLISH_END_DATE,t)},notifyOpen:function(t){this.$emit("open",t,this.$options.name)},openCalendar:function(){setTimeout((function(){var t=document.querySelectorAll(".accordion.s--open, .accordion.s--open .accordion__dropdown");t.forEach((function(t){t.style.overflow="visible"}))}),10)},openStartCalendar:function(){this.openCalendar()},openEndCalendar:function(){this.openCalendar()},closeCalendar:function(){var t=document.querySelectorAll(".accordion.s--open, .accordion.s--open .accordion__dropdown");t.forEach((function(t){t.style.overflow=""}))}}},At=Tt,It=(0,g.Z)(At,wt,Ot,!1,null,null,null),Bt=It.exports,Rt=function(){var t=this,e=t._self._c;return e("a17-accordion",{attrs:{open:t.open},on:{toggleVisibility:t.notifyOpen}},[e("span",{attrs:{slot:"accordion__title"},slot:"accordion__title"},[t._t("default")],2),e("div",{attrs:{slot:"accordion__value"},slot:"accordion__value"},[t._v(t._s(t.currentLabel))]),e("a17-radiogroup",{attrs:{name:t.name,radios:t.radios,initialValue:t.currentValue},on:{change:t.changeValue}})],1)},Nt=[],$t={name:"A17Radioaccordion",components:{"a17-accordion":J},mixins:[W.Z],props:{value:{default:""},title:{default:""},name:{default:""},radios:{default:function(){return[]}}},data:function(){return{currentValue:this.value}},computed:{currentLabel:function(){var t=this.radios.filter(this.isSameValue);return t.length?t[0].label:""}},methods:{isSameValue:function(t){return t.value===this.currentValue},changeValue:function(t){this.currentValue=t,this.$emit("change",t)},notifyOpen:function(t){this.$emit("open",t,this.$options.name)}}},Vt=$t,Ft=(0,g.Z)(Vt,Rt,Nt,!1,null,null,null),Mt=Ft.exports,Zt=function(){var t=this,e=t._self._c;return e("a17-accordion",{attrs:{open:t.open},on:{toggleVisibility:t.notifyOpen}},[e("span",{attrs:{slot:"accordion__title"},slot:"accordion__title"},[t._t("default")],2),e("div",{attrs:{slot:"accordion__value"},slot:"accordion__value"},[t._v(t._s(t.currentLabel))]),e("a17-checkboxgroup",{attrs:{name:t.name,options:t.currentOptions,selected:t.currentValue},on:{change:t.changeValue}})],1)},Ut=[],zt={name:"A17Reviewaccordion",components:{"a17-accordion":J},mixins:[W.Z],props:{value:{default:function(){return[]}},title:{type:String,default:""},name:{type:String,default:""},options:{default:function(){return[]}}},data:function(){return{currentOptions:this.options,currentValue:this.value}},computed:{currentLabel:function(){var t="Pending approval",e=this.currentValue[this.currentValue.length-1];return this.currentValue.length&&this.options.forEach((function(n){n.value===e&&(t=n.display)})),t}},methods:{changeValue:function(t){this.currentValue=t,this.$store.commit(a.V1.UPDATE_REVIEW_PROCESS,t)},notifyOpen:function(t){this.$emit("open",t,this.$options.name)}}},Wt=zt,Gt=(0,g.Z)(Wt,Zt,Ut,!1,null,null,null),Yt=Gt.exports,qt=function(){var t=this,e=t._self._c;return e("a17-accordion",{attrs:{open:t.open},on:{toggleVisibility:t.notifyOpen}},[e("span",{attrs:{slot:"accordion__title"},slot:"accordion__title"},[t._t("default"),t._v(" "),e("span",{staticClass:"f--small f--note"},[t._v("("+t._s(t.revisions.length)+")")])],2),e("div",{attrs:{slot:"accordion__value"},slot:"accordion__value"},[t._v(t._s(t.$trans("publisher.last-edit"))+" "),e("timeago",{attrs:{"auto-update":1,datetime:new Date(t.revisions[0].datetime)}})],1),e("div",{staticClass:"revaccordion__scroller"},[e("ul",{staticClass:"revaccordion__list"},t._l(t.revisions,(function(n){return e("li",{key:n.id,staticClass:"revaccordion__item"},[e("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.openPreview(n.id)}}},[e("span",{staticClass:"revaccordion__author"},[t._v(t._s(n.author))]),e("span",{staticClass:"revaccordion__datetime"},[n.label?e("span",{staticClass:"tag"},[t._v(t._s(n.label))]):t._e(),t._v(" "+t._s(t._f("formatDate")(n.datetime))+" ")])])])})),0)])])},Ht=[],Kt={name:"A17Revisions",components:{"a17-accordion":J},mixins:[W.Z],props:{revisions:{default:function(){return[]}}},filters:x.Z,methods:{notifyOpen:function(t){this.$emit("open",t,this.$options.name)},openPreview:function(t){this.$root.$refs.preview&&this.$root.$refs.preview.open(parseInt(t))}}},Jt=Kt,Xt=(0,g.Z)(Jt,qt,Ht,!1,null,"5bbe0639",null),Qt=Xt.exports,te=function(){var t=this,e=t._self._c;return e("div",{staticClass:"switcher",class:t.switcherClasses},[e("h4",{staticClass:"switcher__title"},[t._v(t._s(t.title))]),e("label",{staticClass:"switcher__button",attrs:{for:t.name+"_live"}},[t.isChecked?e("span",{staticClass:"switcher__label"},[t._v(t._s(t.formatTextEnabled))]):t._e(),t.isChecked?t._e():e("span",{staticClass:"switcher__label"},[t._v(t._s(t.formatTextDisabled))]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.checkedValue,expression:"checkedValue"}],attrs:{type:"checkbox",disabled:t.disabled,name:t.name,id:t.name+"_live",value:"live"},domProps:{checked:Array.isArray(t.checkedValue)?t._i(t.checkedValue,"live")>-1:t.checkedValue},on:{change:function(e){var n=t.checkedValue,r=e.target,i=!!r.checked;if(Array.isArray(n)){var o="live",a=t._i(n,o);r.checked?a<0&&(t.checkedValue=n.concat([o])):a>-1&&(t.checkedValue=n.slice(0,a).concat(n.slice(a+1)))}else t.checkedValue=i}}}),e("span",{staticClass:"switcher__switcher"})])])},ee=[],ne=n(3374),re=n.n(ne);function ie(t){return ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ie(t)}function oe(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ae(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?oe(Object(n),!0).forEach((function(e){se(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oe(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function se(t,e,n){return e=le(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function le(t){var e=ce(t,"string");return"symbol"===ie(e)?e:String(e)}function ce(t,e){if("object"!==ie(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==ie(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var ue={name:"A17Toggle",props:{name:{type:String,default:""},title:{default:"Status"},disabled:{type:Boolean,default:!1},textEnabled:{type:String,default:"Live"},textDisabled:{type:String,default:"Draft"},textExpired:{type:String,default:"Expired"},textScheduled:{type:String,default:"Scheduled"}},filters:x.Z,computed:ae({switcherClasses:function(){return[this.isChecked?"switcher--active":"",this.formatTextEnabled?"switcher--".concat(this.$options.filters.lowercase(this.formatTextEnabled)):""]},isChecked:function(){return this.published},formatTextEnabled:function(){var t=re()(this.startDate,new Date),e=re()(this.endDate,new Date);return this.endDate&&e<0?this.textExpired:this.startDate&&t>0?this.textScheduled:this.textEnabled},formatTextDisabled:function(){return this.textDisabled},checkedValue:{get:function(){return this.published},set:function(t){this.$store.commit(a.V1.UPDATE_PUBLISH_STATE,t),this.$emit("change",t)}}},(0,i.rn)({startDate:function(t){return t.publication.startDate},endDate:function(t){return t.publication.endDate},published:function(t){return t.publication.published}}))},de=ue,fe=(0,g.Z)(de,te,ee,!1,null,"285ca0dd",null),pe=fe.exports,ve=function(){var t=this,e=t._self._c;return e("div",{staticClass:"userInfo"},[e("div",{staticClass:"userInfo__content"},[t.userInfo.registered_at?e("div",{staticClass:"userInfo__item"},[e("div",{staticClass:"userInfo__row"},[e("span",{staticClass:"userInfo__row-cell"},[t._v("Registered at")]),e("span",{staticClass:"userInfo__row-cell userInfo__row-cell--value"},[t._v(t._s(t.userInfo.registered_at))])])]):t._e(),t.userInfo.last_login_at?e("div",{staticClass:"userInfo__item"},[e("div",{staticClass:"userInfo__row"},[e("span",{staticClass:"userInfo__row-cell"},[t._v("Last login at")]),e("span",{staticClass:"userInfo__row-cell userInfo__row-cell--value"},[t._v(t._s(t.userInfo.last_login_at))])])]):t._e(),t.userInfo.resend_registration_link?e("div",{staticClass:"userInfo__item"},[e("a",{staticClass:"userInfo__link",attrs:{href:t.userInfo.resend_registration_link,type:"submit"}},[e("span",{staticClass:"f--link-underlined--o"},[t._v("Resend registration email")])])]):t._e(),e("div",{staticClass:"userInfo__item"},[e("button",{staticClass:"userInfo__link",attrs:{type:"button"},on:{click:t.openPasswordModal}},[e("span",{staticClass:"f--link-underlined--o"},[t._v(t._s(t.userInfo.is_activated?"Reset password":"Register account now"))])])])]),e("a17-modal",{ref:"passwordModal",staticClass:"modal--form",attrs:{title:t.userInfo.is_activated?"Reset password for ".concat(t.userInfo.user_name):"Register account for ".concat(t.userInfo.user_name)},on:{hide:t.hidePasswordModal}},[e("div",{staticClass:"userInfo__form-row"},[e("a17-textfield",{attrs:{name:"new_password",id:"new_password",fieldName:"new_password",inStore:"value",label:"New password",maxlength:50,note:"Must have at least 8 characters",required:"",type:"password"}})],1),t.userInfo.is_activated?e("div",{staticClass:"userInfo__form-row"},[e("a17-singlecheckbox",{attrs:{inStore:"value",name:"require_password_change",initialValue:!1,id:"require_password_change",fieldName:"require_password_change",label:"Require password change at next login"}})],1):t._e(),e("div",{staticClass:"userInfo__form-row"},[e("a17-modal-validation",{attrs:{mode:t.userInfo.is_activated?"Update":"Create"}})],1)])],1)},he=[],me=n(6287),be={name:"A17UserInfo",components:{"a17-textfield":me.Z,"a17-modal-validation":E.Z},props:{userInfo:{type:Object,default:null}},data:function(){return{isPasswordModalOpen:!1}},methods:{openPasswordModal:function(){this.isPasswordModalOpen=!0,this.$refs.passwordModal.open(),this.$store.commit(a.Yc.UPDATE_FORM_FIELD,{name:"reset_password",value:!0})},hidePasswordModal:function(){this.$store.commit(a.Yc.UPDATE_FORM_FIELD,{name:"reset_password",value:!1})}}},ye=be,ge=(0,g.Z)(ye,ve,he,!1,null,"37e685f4",null),_e=ge.exports;function we(t){return we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},we(t)}function Oe(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ke(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Oe(Object(n),!0).forEach((function(e){Se(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Oe(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Se(t,e,n){return e=Pe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Pe(t){var e=Ee(t,"string");return"symbol"===we(e)?e:String(e)}function Ee(t,e){if("object"!==we(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==we(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var Ce={name:"A17Publisher",components:{"a17-switcher":pe,"a17-radioaccordion":Mt,"a17-checkboxaccordion":et,"a17-reviewaccordion":Yt,"a17-revaccordion":Qt,"a17-parentaccordion":_t,"a17-pubaccordion":Bt,"a17-multibutton":st,"a17-userinfo":_e},props:{showLanguages:{type:Boolean,default:!0},dateFormat:{type:String,default:null},dateDisplayFormat:{type:String,default:null},date_24h:{type:Boolean,default:(0,Pt.aq)()}},data:function(){return{singleOpen:!0,openStates:{A17Reviewaccordion:!1,A17Radioaccordion:!1,A17Checkboxaccordion:!1,A17Revisions:!1,A17Pubaccordion:!1,A17Parents:!1}}},filters:x.Z,computed:ke(ke({localizedDateDisplayFormat:function(){return this.dateDisplayFormat?this.dateDisplayFormat:"MMM, DD, YYYY, "+(0,Pt.rA)(this.date_24h)},reviewProcessCompleteValues:function(){var t=[];return this.reviewProcessComplete.length&&this.reviewProcessComplete.forEach((function(e){t.push(e.value)})),t},submitOptions:function(){return this.$store.getters.getSubmitOptions},publishedLanguagesValues:function(){var t=[];return this.publishedLanguages.length&&this.publishedLanguages.forEach((function(e){t.push(e.value)})),t}},(0,i.rn)({languages:function(t){return t.language.all},revisions:function(t){return t.revision.all},parentId:function(t){return t.parents.active},parents:function(t){return t.parents.all},published:function(t){return t.publication.published},publishSubmit:function(t){return t.publication.publishSubmit},textEnabled:function(t){return t.publication.publishedLabel},textDisabled:function(t){return t.publication.draftLabel},textExpired:function(t){return t.publication.expiredLabel},textScheduled:function(t){return t.publication.scheduledLabel},withPublicationToggle:function(t){return t.publication.withPublicationToggle},withPublicationTimeframe:function(t){return t.publication.withPublicationTimeframe},visibility:function(t){return t.publication.visibility},visibilityOptions:function(t){return t.publication.visibilityOptions},reviewProcess:function(t){return t.publication.reviewProcess},hasUnsavedChanges:function(t){return t.publication.hasUnsavedChanges},submitDisableMessage:function(t){return t.publication.submitDisableMessage},userInfo:function(t){return t.publication.userInfo}})),(0,i.Se)(["publishedLanguages","reviewProcessComplete"])),methods:{buttonClicked:function(t){this.$store.commit(a.V1.UPDATE_SAVE_TYPE,t)},openCloseAccordion:function(t,e){if(this.singleOpen)if(t)for(var n in this.openStates)this.openStates[n]=n===e;else this.openStates[e]=!1},openPreview:function(){this.$root.$refs.preview&&this.$root.$refs.preview.open(0)},updateVisibility:function(t){this.$store.commit(a.V1.UPDATE_PUBLISH_VISIBILITY,t)},openMoveToTrashModal:function(){this.$parent.$refs.moveToTrashModal.open()}}},Le=Ce,xe=(0,g.Z)(Le,M,Z,!1,null,"5b644dbd",null),De=xe.exports,je=function(){var t=this,e=t._self._c;return t.parents.length||t.hasUrl?e("div",{staticClass:"pagenav"},[t.parents.length?e("div",{staticClass:"pagenav__form"},[e("a17-vselect",{attrs:{name:"parents_sources",placeholder:t.placeholder,size:"large",searchable:!0,options:t.options},on:{change:t.gotoUrl}})],1):t._e(),t.hasUrl?e("nav",{staticClass:"pagenav__nav"},[t.previousUrl?e("a",{staticClass:"pagenav__btn",attrs:{href:t.previousUrl}},[t._v("← "+t._s(t.previousLabel))]):e("span",{staticClass:"pagenav__btn"},[t._v("← "+t._s(t.previousLabel))]),t.nextUrl?e("a",{staticClass:"pagenav__btn",attrs:{href:t.nextUrl}},[t._v(t._s(t.nextLabel)+" →")]):e("span",{staticClass:"pagenav__btn"},[t._v(t._s(t.nextLabel)+" →")])]):t._e()]):t._e()},Te=[];function Ae(t){return Ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ae(t)}function Ie(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Be(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ie(Object(n),!0).forEach((function(e){Re(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ie(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Re(t,e,n){return e=Ne(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ne(t){var e=$e(t,"string");return"symbol"===Ae(e)?e:String(e)}function $e(t,e){if("object"!==Ae(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==Ae(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var Ve={name:"A17PageNav",props:{previousLabel:{type:String,default:"Previous page"},nextLabel:{type:String,default:"Next page"},previousUrl:{type:String,default:""},nextUrl:{type:String,default:""},placeholder:{type:String,default:""}},data:function(){return{}},computed:Be({hasUrl:function(){return this.previousUrl||this.nextUrl},options:function(){return ut(this.parents,"–")}},(0,i.rn)({parents:function(t){return t.parents.all}})),methods:{gotoUrl:function(t){t.edit&&(window.location.href=t.edit)}},beforeMount:function(){}},Fe=Ve,Me=(0,g.Z)(Fe,je,Te,!1,null,"578ca18c",null),Ze=Me.exports,Ue=n(8398),ze=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("draggable",{staticClass:"content__content",attrs:{options:t.dragOptions},model:{value:t.blocks,callback:function(e){t.blocks=e},expression:"blocks"}},[e("transition-group",{attrs:{name:"draggable_list",tag:"div"}},t._l(t.blocks,(function(n,r){return e("div",{key:n.id,staticClass:"content__item"},[e("a17-blockeditor-item",{ref:"blockList",refInFor:!0,attrs:{block:n,index:r,withHandle:t.draggable,size:t.blockSize,opened:t.opened}},[t.hasRemainingBlocks?e("a17-button",{attrs:{slot:"block-actions",variant:"icon","data-action":""},on:{click:function(e){return t.duplicateBlock(r)}},slot:"block-actions"},[e("span",{directives:[{name:"svg",rawName:"v-svg"}],attrs:{symbol:"add"}})]):t._e(),e("div",{attrs:{slot:"dropdown-action"},slot:"dropdown-action"},[t.opened?e("button",{attrs:{type:"button"},on:{click:function(e){return t.collapseAllBlocks()}}},[t._v(" "+t._s(t.$trans("fields.block-editor.collapse-all","Collapse all"))+" ")]):e("button",{attrs:{type:"button"},on:{click:function(e){return t.expandAllBlocks()}}},[t._v(" "+t._s(t.$trans("fields.block-editor.expand-all","Expand all"))+" ")]),t.hasRemainingBlocks?e("button",{attrs:{type:"button"},on:{click:function(e){return t.duplicateBlock(r)}}},[t._v(" "+t._s(t.$trans("fields.block-editor.clone-block","Clone block"))+" ")]):t._e(),e("button",{attrs:{type:"button"},on:{click:function(e){return t.deleteBlock(r)}}},[t._v(" "+t._s(t.$trans("fields.block-editor.delete","Delete"))+" ")])])],1)],1)})),0)],1),e("div",{staticClass:"content__trigger"},[t.hasRemainingBlocks&&t.blockType.trigger&&t.allowCreate?e("a17-button",{class:t.triggerClass,attrs:{variant:t.triggerVariant},on:{click:function(e){return t.addBlock()}}},[t._v(" "+t._s(t.blockType.trigger)+" ")]):t._e(),t.hasRemainingBlocks&&t.browser?e("a17-button",{class:t.triggerClass,attrs:{variant:t.triggerVariant},on:{click:function(e){return t.openBrowser()}}},[t._v(" "+t._s(t.blockType.selectTrigger)+" ")]):t._e(),e("div",{staticClass:"content__note f--note f--small"},[t._t("default")],2)],1),t.browserIsOpen?e("a17-standalone-browser",{ref:"localbrowser",attrs:{endpoint:t.browser,"for-repeater":!0,max:t.max},on:{selected:t.addRepeatersFromSelection,close:function(e){t.browserIsOpen=!1}}}):t._e()],1)},We=[],Ge=n(2719),Ye=n.n(Ge),qe=n(586),He=n(1086),Ke=n(8382);function Je(t){return Je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Je(t)}function Xe(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Qe(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Xe(Object(n),!0).forEach((function(e){tn(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Xe(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function tn(t,e,n){return e=en(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function en(t){var e=nn(t,"string");return"symbol"===Je(e)?e:String(e)}function nn(t,e){if("object"!==Je(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==Je(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var rn={name:"A17Repeater",components:{A17StandaloneBrowser:He.Z,"a17-blockeditor-item":qe["default"],draggable:Ye()},mixins:[Ke.Z],props:{type:{type:String,required:!0},name:{type:String,required:!0},buttonAsLink:{type:Boolean,default:!1},browser:{type:Object,required:!1,default:null},relation:{type:String,required:!1},allowCreate:{type:Boolean,default:!0},max:{type:[Number,null],required:!1,default:null}},data:function(){return{opened:!0,browserIsOpen:!1,handle:".block__handle"}},computed:Qe({triggerVariant:function(){return this.buttonAsLink?"aslink":this.inContentEditor?"outline":"action"},triggerClass:function(){return this.inContentEditor?"content__button":""},blockSize:function(){return this.inContentEditor?"small":""},inContentEditor:function(){return"undefined"!==typeof this.$parent.repeaterName},hasRemainingBlocks:function(){var t=null;return this.max&&this.max>0?t=this.max:this.blockType.hasOwnProperty("max")&&(t=this.blockType.max),!t||t>this.blocks.length},blockType:function(){return this.availableBlocks[this.type]?this.availableBlocks[this.type]:{}},blocks:{get:function(){return this.savedBlocks.hasOwnProperty(this.name)&&this.savedBlocks[this.name]||[]},set:function(t){this.$store.commit(a.Yc.REORDER_FORM_BLOCKS,{type:this.type,name:this.name,blocks:t})}}},(0,i.rn)({savedBlocks:function(t){return t.repeaters.repeaters},availableBlocks:function(t){return t.repeaters.availableRepeaters}})),methods:{setOpened:function(){var t=this.$refs.blockList&&this.$refs.blockList.every((function(t){return!t.visible}));t&&(this.opened=!1)},addBlock:function(){var t=this;this.$store.commit(a.Yc.ADD_FORM_BLOCK,{type:this.type,name:this.name}),this.$nextTick((function(){t.checkExpandBlocks()}))},addRepeatersFromSelection:function(t){this.$store.commit(a.Yc.ADD_REPEATER_FROM_SELECTION,{type:this.type,name:this.name,selection:t,relation:this.relation})},duplicateBlock:function(t){var e=this;this.$store.dispatch(s.ZP.DUPLICATE_REPEATER,{editorName:this.name,index:t,futureIndex:t+1,block:this.blocks[t],id:Date.now()+Math.floor(1e3*Math.random())}),this.$nextTick((function(){e.checkExpandBlocks()}))},deleteBlock:function(t){this.$store.commit(a.Yc.DELETE_FORM_BLOCK,{type:this.type,name:this.name,index:t})},collapseAllBlocks:function(){this.opened=!1},expandAllBlocks:function(){this.opened=!0},checkExpandBlocks:function(){void 0!==this.$refs.blockList[this.$refs.blockList.length-1]&&this.$refs.blockList[this.$refs.blockList.length-1].toggleExpand()},openBrowser:function(){this.browserIsOpen=!0}},mounted:function(){this.$nextTick((function(){this.$refs.blockList&&this.blocks&&this.blocks.length<4&&this.$refs.blockList.forEach((function(t){return t.toggleExpand()})),this.setOpened()}))}},on=rn,an=(0,g.Z)(on,ze,We,!1,null,"55088abc",null),sn=an.exports,ln=function(){var t=this,e=t._self._c;return e("a17-inputframe",{attrs:{error:t.error,note:t.note,locale:t.locale,label:t.label,name:t.name,required:t.required},on:{localize:t.updateLocale}},[e("div",{staticClass:"form__field",class:t.textfieldClasses},[e("input",{attrs:{type:"search",placeholder:t.placeholder,name:t.name,id:t.name,disabled:t.disabled,required:t.required,readonly:t.readonly,autofocus:t.autofocus,autocomplete:t.autocomplete},domProps:{value:t.address},on:{focus:t.onFocus,blur:t.onBlur,input:t.onInput}}),t.showMap?e("div",{staticClass:"form__field--showMap"},[e("a",{attrs:{href:"#",type:"button"},on:{click:function(e){return e.preventDefault(),t.toggleMap.apply(null,arguments)}}},[e("span",{directives:[{name:"svg",rawName:"v-svg"}],attrs:{symbol:"location"}}),e("span",{domProps:{innerHTML:t._s(t.mapMessage)}})])]):t._e(),e("input",{attrs:{type:"hidden",name:"".concat(t.name,"__lat")},domProps:{value:t.lat}}),e("input",{attrs:{type:"hidden",name:"".concat(t.name,"__lng")},domProps:{value:t.lng}})]),t.showMap?e("div",{directives:[{name:"show",rawName:"v-show",value:t.isMapOpen,expression:"isMapOpen"}],staticClass:"form__mapContainer"}):t._e()])},cn=[],un=n(8446),dn=n.n(un),fn=n(2240),pn=n(35),vn=n(2847),hn={show:window.$trans("fields.map.show"),hide:window.$trans("fields.map.hide")},mn="https://maps.googleapis.com/maps/api/js?libraries=places&key=",bn=window["TWILL"].hasOwnProperty("APIKEYS")&&window["TWILL"].APIKEYS.hasOwnProperty("googleMapApi")?window["TWILL"].APIKEYS.googleMapApi:null,yn={name:"A17Locationfield",mixins:[pn.Z,C.Z,L.Z,fn.Z],props:{type:{type:String,default:"text"},zoom:{type:Number,default:15},showMap:{type:Boolean,default:!0},openMap:{type:Boolean,default:!1},saveExtendedData:{type:Boolean,default:!1},autoDetectLatLngValue:{type:Boolean,default:!1},initialLat:{type:Number,default:null},initialLng:{type:Number,default:null}},data:function(){return{map:null,autocompletePlace:null,markers:[],address:"",boundingBox:[],types:[],beforeFocusAddress:"",lat:this.initialLat,lng:this.initialLng,focused:!1,isMapOpen:this.openMap,mapMessage:this.openMap?hn.hide:hn.show}},computed:{value:{get:function(){var t={latlng:this.lat+"|"+this.lng,address:this.address};return this.saveExtendedData&&(t.boundingBox=this.boundingBox,t.types=this.types),t},set:function(t){var e=t.latlng.split("|");this.lat=parseFloat(e[0]),this.lng=parseFloat(e[e.length-1]),this.address=t.address,this.saveExtendedData&&(this.boundingBox=t.boundingBox,this.types=t.types)}},textfieldClasses:function(){return{"s--focus":this.focused,"s--disabled":this.disabled}}},methods:{updateFromStore:function(t){if(!dn()(t,this.value)&&(this.value=t,this.clearMarkers(),""===this.address&&(this.lat=this.initialLat,this.lng=this.initialLng),this.lat&&this.lng&&this.map)){var e={lat:this.lat,lng:this.lng};this.addMarker(e),this.map.panTo(e)}},onFocus:function(t){this.focused=!0,this.beforeFocusAddress=this.address,this.$emit("focus")},onBlur:function(t){this.focused=!1,""===this.address&&(this.clearMarkers(),this.lat=this.initialLat,this.lng=this.initialLng),this.beforeFocusAddress!==this.address&&this.saveIntoStore(),this.$emit("blur")},onInput:function(t){var e=t.target.value;if(this.address=e,this.$emit("change",e),this.autoDetectLatLngValue){var n=e.match(/^(-?\d+(?:\.\d+)?),+ *(-?\d+(?:\.\d+)?)$/);n&&this.onLatLngEntered(n[1],n[2])}},onPlaceChanged:function(){var t=this.autocompletePlace.getPlace();if(this.clearMarkers(),this.clearLatLng(),t.geometry){var e=t.geometry.location;this.address=t.formatted_address,this.setLatLng(e),this.saveExtendedData&&(this.boundingBox=t.geometry.viewport,this.types=t.types),this.map&&(this.addMarker(e),this.map.panTo(e),this.map.setZoom(this.zoom))}this.beforeFocusAddress=this.address,this.saveIntoStore()},onClick:function(t){var e=t.latLng;this.clearMarkers(),this.clearLatLng(),this.address=[e.lat(),e.lng()].join(","),this.setLatLng(e),this.map&&this.addMarker(e),this.saveIntoStore()},onLatLngEntered:h()((function(t,e){var n=new google.maps.LatLng(t,e);this.clearMarkers(),this.clearLatLng(),this.address=[n.lat(),n.lng()].join(","),this.setLatLng(n),this.map&&(this.addMarker(n),this.map.setCenter(n)),this.saveIntoStore()}),600),clearMarkers:function(){for(var t=0;t<this.markers.length;t++)this.markers[t]&&this.markers[t].setMap(null);this.markers=[]},clearLatLng:function(){this.lat=0,this.lng=0},addMarker:function(t){var e=new google.maps.Marker({position:t,map:this.map});this.markers.push(e)},setLatLng:function(t){this.lat=t.lat(),this.lng=t.lng()},toggleMap:function(){this.isMapOpen=!this.isMapOpen,this.mapMessage=this.isMapOpen?hn.hide:hn.show,this.map||"undefined"===typeof google||this.$nextTick((function(){this.initMap()}))},initMap:function(){var t=this.lat+this.lng,e={zoom:t?this.zoom:1,center:new google.maps.LatLng(this.lat,this.lng),mapTypeControl:!1,panControl:!1,zoomControl:!1,streetViewControl:!1},n=document.createElement("div");n.className="form__map",this.$el.querySelector(".form__mapContainer").appendChild(n),this.map=new google.maps.Map(n,e),t&&this.addMarker(new google.maps.LatLng(this.lat,this.lng)),this.map.addListener("click",this.onClick)},initGeocoder:function(){var t=this;if(this.autocompletePlace=new google.maps.places.Autocomplete(this.$el.querySelector('input[type="search"]')),google.maps.event.addListener(this.autocompletePlace,"place_changed",this.onPlaceChanged),""===this.address&&this.lat&&this.lng){var e=new google.maps.Geocoder,n={lat:this.lat,lng:this.lng};e.geocode({location:n},(function(e,n){"OK"===n?e[1]?t.address=e[1].formatted_address:console.error("Geocoding - No results found"):console.error("Geocoding - Geocoder failed due to: "+n)}))}},initGoogleApi:function(){this.initGeocoder(),this.showMap&&this.isMapOpen&&this.initMap()}},mounted:function(){var t=this;if("undefined"!==typeof google)this.initGoogleApi();else{var e="google-map-api-script",n=mn+bn;(0,vn.ve)(e,n,"text/javascript").then((function(){t.initGoogleApi()}))}},beforeDestroy:function(){"undefined"!==typeof google&&google.maps.event.clearListeners(this.autocompletePlace,"place_changed",this.onPlaceChanged)}},gn=yn,_n=(0,g.Z)(gn,ln,cn,!1,null,"c676a44e",null),wn=_n.exports,On=function(){var t=this,e=t._self._c;return e("div",[t.keepAlive?[e("div",{directives:[{name:"show",rawName:"v-show",value:t.open,expression:"open"}]},[t._t("default")],2)]:[t.open?e("div",{ref:"fieldContainer"},[t._t("default")],2):t._e()]],2)},kn=[],Sn=n(6678),Pn=n.n(Sn);function En(t){return En="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},En(t)}function Cn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ln(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Cn(Object(n),!0).forEach((function(e){xn(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Cn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function xn(t,e,n){return e=Dn(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Dn(t){var e=jn(t,"string");return"symbol"===En(e)?e:String(e)}function jn(t,e){if("object"!==En(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==En(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var Tn={name:"A17ConnectorField",props:{fieldName:{type:String,required:!0},requiredFieldValues:{default:""},inModal:{type:Boolean,default:!1},keepAlive:{type:Boolean,default:!1},arrayContains:{type:Boolean,default:!0},isValueEqual:{type:Boolean,default:!0},isBrowser:{type:Boolean,default:!1},matchEmptyBrowser:{type:Boolean,default:!1}},computed:Ln(Ln({storedValue:function(){return this.inModal?this.modalFieldValueByName(this.fieldName):this.isBrowser?this.selectedBrowser[this.fieldName]:this.fieldValueByName(this.fieldName)}},(0,i.Se)(["fieldValueByName","modalFieldValueByName"])),(0,i.rn)({fields:function(t){return t.form.fields},modalFields:function(t){return t.form.modalFields},selectedBrowser:function(t){return t.browser.selected}})),data:function(){return{open:!1}},watch:{storedValue:function(t){this.toggleVisibility(t)}},methods:{toggleVisibility:function(t){if(this.$refs.fieldContainer&&this.$slots.default.forEach((function(t){void 0!==t.componentInstance&&t.componentInstance.$refs&&t.componentInstance.$refs.field?t.componentInstance.$refs.field[0]&&t.componentInstance.$refs.field[0].destroyValue():void 0!==t.componentInstance&&void 0!==t.componentInstance.$slots&&void 0!==t.componentInstance.$slots.default&&t.componentInstance.$slots.default.forEach((function(t){t.componentInstance&&t.componentInstance.destroyValue&&t.componentInstance.destroyValue()}))})),this.isBrowser){var e,n=null!==(e=t&&t.length)&&void 0!==e?e:0;return this.matchEmptyBrowser&&0===n?void(this.open=!0):void(this.open=!this.matchEmptyBrowser&&n>0)}var r=Pn()(t),i=Pn()(this.requiredFieldValues),o=Array.isArray(i)?i:[i];Array.isArray(i)&&i.sort(),Array.isArray(r)&&r.sort(),this.isValueEqual?Array.isArray(r)?this.open=this.arrayContains?o.some((function(t){return r.includes(t)})):this.open=JSON.stringify(o)===JSON.stringify(r):this.open=Array.isArray(i)?-1!==i.indexOf(r):dn()(r,i):Array.isArray(r)?this.open=this.arrayContains?o.every((function(t){return!r.includes(t)})):this.open=JSON.stringify(o)!==JSON.stringify(r):this.open=Array.isArray(i)?-1===i.indexOf(r):!dn()(r,i)}},mounted:function(){var t=this;this.$nextTick((function(){t.toggleVisibility(this.storedValue)}))}},An=Tn,In=(0,g.Z)(An,On,kn,!1,null,null,null),Bn=In.exports,Rn=n(5989),Nn=function(){var t=this,e=t._self._c;return e("div",{staticClass:"overlay",class:t.overlayClasses},[e("div",{staticClass:"overlay__window"},[e("header",{staticClass:"overlay__header"},[t.overlayTitle?e("span",[t._v(t._s(t.overlayTitle))]):t._e(),t.$slots["overlay__header"]?e("span",{staticClass:"overlay__header-slot"},[t._t("overlay__header")],2):t._e(),e("button",{staticClass:"overlay__close",attrs:{type:"button"},on:{click:t.hide}},[e("span",{directives:[{name:"svg",rawName:"v-svg"}],attrs:{symbol:"close_modal"}}),e("span",{staticClass:"overlay__closeLabel"},[t._v(t._s(t.$trans("overlay.close")))])])]),t.active?e("div",{directives:[{name:"show",rawName:"v-show",value:!t.hidden,expression:"!hidden"}],staticClass:"overlay__content"},[t._t("default")],2):t._e()])])},$n=[],Vn=n(3523);function Fn(t){return Fn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fn(t)}function Mn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Zn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Mn(Object(n),!0).forEach((function(e){Un(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Mn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Un(t,e,n){return e=zn(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zn(t){var e=Wn(t,"string");return"symbol"===Fn(e)?e:String(e)}function Wn(t,e){if("object"!==Fn(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==Fn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var Gn=document.documentElement,Yn=Vn.Z.overlay,qn=Vn.Z.modal,Hn={name:"A17Overlay",props:{title:{type:String,default:""},revisionTitle:{type:String,default:function(){return this.$trans("previewer.revision-history")}},forceClose:{type:Boolean,default:!1},forceLock:{type:Boolean,default:!1},mode:{type:String,default:""},customClasses:{type:[String,Array],default:function(){return[]}}},data:function(){return{active:!1,hidden:!0,locked:!1}},computed:Zn({toggleClasses:function(){var t="string"===typeof this.customClasses?[this.customClasses]:this.customClasses;return[Yn].concat(t)},activeRevision:function(){return Object.keys(this.currentRevision).length},overlayTitle:function(){return this.activeRevision?this.revisionTitle:this.title},overlayClasses:function(){return{"overlay--active":this.active,"overlay--hidden":this.hidden}}},(0,i.rn)({currentRevision:function(t){return t.revision.active}})),methods:{open:function(){this.active&&!this.hidden||(this.active=!0,this.hidden=!1,this.toggleClasses.forEach((function(t){return Gn.classList.add(t)})),window.addEventListener("keyup",this.keyPressed),this.$emit("open"))},mask:function(){this.toggleClasses.forEach((function(t){return Gn.classList.remove(t)})),window.removeEventListener("keyup",this.keyPressed),this.$emit("close")},hide:function(){this.active&&(this.locked||(this.forceClose?this.close():(this.hidden=!0,this.mask())))},close:function(t){this.active&&(this.locked||(this.active=!1,this.mask()))},keyPressed:function(t){if(27===t.which||27===t.keyCode){if(Gn.classList.contains(qn))return;this.hide(),this.$emit("esc-key")}}},beforeDestroy:function(){this.$el.parentNode&&(this.active&&window.removeEventListener("keyup",this.keyPressed),this.$el.parentNode.removeChild(this.$el))}},Kn=Hn,Jn=(0,g.Z)(Kn,Nn,$n,!1,null,"6227219a",null),Xn=Jn.exports,Qn=function(){var t=this,e=t._self._c;return e("a17-overlay",{ref:"overlay",attrs:{title:t.$trans("previewer.title")}},[t.revisions.length?e("div",{staticClass:"previewer",class:{"previewer--loading":t.loading}},[t.activeRevision?e("a17-button",{staticClass:"previewer__restore",attrs:{variant:"warning",size:"small"},on:{click:t.restoreRevision}},[t._v(t._s(t.$trans("previewer.restore")))]):t._e(),!t.activeRevision&&t.editor?e("a17-button",{staticClass:"previewer__restore",attrs:{variant:"editor",size:"small"},on:{click:t.openEditor}},[e("span",{directives:[{name:"svg",rawName:"v-svg"}],staticClass:"hide--xsmall",attrs:{symbol:"editor"}}),t._v(t._s(t.$trans("previewer.editor")))]):t._e(),e("div",{staticClass:"previewer__frame"},[e("div",{staticClass:"previewer__inner"},[e("div",{staticClass:"previewer__nav"},[e("div",{staticClass:"previewer__revisions"},[t.slipScreen?e("span",{staticClass:"tag tag--revision"},[t._v(t._s(t.$trans("previewer.past-revision")))]):t._e(),e("a17-dropdown",{ref:"previewRevisionsDropdown",attrs:{position:"bottom-left",maxWidth:400,maxHeight:300}},[e("a17-button",{staticClass:"previewer__trigger",on:{click:function(e){return t.$refs.previewRevisionsDropdown.toggle()}}},[t.activeRevision?[t._v(" "+t._s(t._f("formatDate")(t.currentRevision.datetime))+" ("+t._s(t.currentRevision.author)+") "),e("span",{directives:[{name:"svg",rawName:"v-svg"}],attrs:{symbol:"dropdown_module"}})]:[t._v(" "+t._s(t.$trans("previewer.last-edit"))+" "),e("timeago",{attrs:{"auto-update":1,datetime:new Date(t.revisions[0].datetime)}}),t._v(" "),e("span",{directives:[{name:"svg",rawName:"v-svg"}],attrs:{symbol:"dropdown_module"}})]],2),e("div",{attrs:{slot:"dropdown__content"},slot:"dropdown__content"},t._l(t.revisions,(function(n){return e("button",{key:n.id,staticClass:"previewerRevision",class:{"previewerRevision--active":t.currentRevision.id===n.id},attrs:{type:"button"},on:{click:function(e){return t.toggleRevision(n.id)}}},[e("span",{staticClass:"previewerRevision__author"},[t._v(t._s(n.author))]),e("span",{staticClass:"previewerRevision__datetime"},[n.label?e("span",{staticClass:"tag"},[t._v(t._s(n.label))]):t._e(),t._v(" "+t._s(t._f("formatDate")(n.datetime)))])])})),0)],1)],1),t.slipScreen?t._e():e("ul",{staticClass:"previewer__breakpoints"},t._l(t.breakpoints,(function(n){return e("li",{key:n.size,staticClass:"previewer__breakpoint",class:{"s--active":t.activeBreakpoint===n.size}},[e("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.resizePreview(n.size)}}},[e("span",{directives:[{name:"svg",rawName:"v-svg"}],attrs:{symbol:n.name}})])])})),0),t.activeRevision?e("div",{staticClass:"previewer__compare"},[t.slipScreen?e("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.singleView.apply(null,arguments)}}},[e("span",{staticClass:"previewer__compareLabel"},[t._v(t._s(t.$trans("previewer.single-view")))]),t._v(" "),e("span",{directives:[{name:"svg",rawName:"v-svg"}],attrs:{symbol:"revision-single"}})]):e("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.compareView.apply(null,arguments)}}},[e("span",{staticClass:"previewer__compareLabel"},[t._v(t._s(t.$trans("previewer.compare-view")))]),t._v(" "),e("span",{directives:[{name:"svg",rawName:"v-svg"}],attrs:{symbol:"revision-compare"}})])]):t._e()]),e("div",{staticClass:"previewer__content"},[e("div",{staticClass:"previewer__iframe"},[e("a17-iframe",{attrs:{content:t.activeRevision?t.activeContent:t.currentContent,size:t.activeBreakpoint,scrollPosition:t.scrollPosition},on:{scrollDoc:t.setIframeScroll}})],1),t.slipScreen?e("div",{staticClass:"previewer__iframe"},[e("div",{staticClass:"previewer__iframeInfos"},[e("span",{staticClass:"tag tag--revision"},[t._v(t._s(t.$trans("previewer.current-revision")))]),t._v(t._s(t.$trans("previewer.unsaved")))]),e("a17-iframe",{attrs:{content:t.currentContent,scrollPosition:t.scrollPosition},on:{scrollDoc:t.setIframeScroll}})],1):t._e()])])])],1):t._e()])},tr=[],er=function(){var t=this,e=t._self._c;return e("iframe",{staticClass:"previewerframe",style:{width:t.size>0?t.size+"px":""},attrs:{srcdoc:t.content,frameborder:"0"},on:{load:t.loadPreview}})},nr=[],rr={name:"A17previewerFrame",props:{size:{type:Number,default:0},content:{type:String,default:""},scrollPosition:{type:Number,default:0}},data:function(){return{currentScroll:this.scrollPosition}},watch:{scrollPosition:function(t){this.$el.contentWindow.scrollTo(0,t)}},methods:{loadPreview:function(t){var e=this,n=t.target,r=Array.from(n.contentDocument.querySelectorAll("a:not(.sf-dump-toggle)")||[]);r.forEach((function(t){t.getAttribute("href").startsWith("#")&&"#"!==t.getAttribute("href")||(t.setAttribute("disabled","disabled"),t.style.pointerEvents="none"),t.onclick=function(t){if(!t.defaultPrevented)return!1}}));var i=Array.from(n.contentDocument.querySelectorAll("form")||[]);i.forEach((function(t){t.addEventListener("submit",(function(t){t.preventDefault()}),!0)})),n.contentDocument.addEventListener("scroll",(function(t){var r=n.contentWindow.pageYOffset;r!==e.currentScroll&&(e.$emit("scrollDoc",r),e.currentScroll=r)})),this.$el.contentWindow.scrollTo(0,this.currentScroll)}}},ir=rr,or=(0,g.Z)(ir,er,nr,!1,null,"0559a056",null),ar=or.exports;function sr(t){return sr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sr(t)}function lr(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function cr(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?lr(Object(n),!0).forEach((function(e){ur(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lr(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ur(t,e,n){return e=dr(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dr(t){var e=fr(t,"string");return"symbol"===sr(e)?e:String(e)}function fr(t,e){if("object"!==sr(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==sr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var pr={name:"A17Previewer",components:{"a17-iframe":ar},data:function(){return{loadedCurrent:!1,slipScreen:!1,activeBreakpoint:1280,lastActiveBreakpoint:1280,scrollPosition:0,breakpoints:[{size:1280,name:"preview-desktop"},{size:1024,name:"preview-tablet-h"},{size:768,name:"preview-tablet-v"},{size:320,name:"preview-mobile"}]}},filters:x.Z,computed:cr({activeRevision:function(){return Object.keys(this.currentRevision).length}},(0,i.rn)({editor:function(t){return t.blocks.editor},loading:function(t){return t.revision.loading},currentRevision:function(t){return t.revision.active},activeContent:function(t){return t.revision.activeContent},currentContent:function(t){return t.revision.currentContent},revisions:function(t){return t.revision.all},restoreRevisionUrl:function(t){return t.form.restoreUrl}})),methods:{open:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this;function n(){e.$refs.overlay&&e.$refs.overlay.open(),e.singleView()}this.loadedCurrent=!1,this.activeBreakpoint=1280,this.lastActiveBreakpoint=1280,t?this.previewRevision(t,(function(){n()})):this.previewCurrent((function(){n()}))},close:function(){this.$refs.overlay.close()},openEditor:function(){var t=this.$root.$refs;t.preview&&t.preview.close(),t.editor&&t.editor.open()},restoreRevision:function(){window.location.href=this.restoreRevisionUrl+"?revisionId="+this.currentRevision.id},resizePreview:function(t){this.activeBreakpoint=parseInt(t),this.lastActiveBreakpoint=parseInt(t)},previewCurrent:function(t){this.$store.commit(a.UZ.UPDATE_REV,0),this.loadCurrent(t)},loadCurrent:function(t){var e=this;this.loadedCurrent?t&&"function"===typeof t&&t():(this.loadedCurrent=!0,this.$store.dispatch(s.ZP.GET_CURRENT).then((function(){t&&"function"===typeof t&&t()}),(function(t){e.$store.commit(a.Yc.SET_FORM_ERRORS,t.response.data),e.$store.commit(a.qq.SET_NOTIF,{message:"Your submission could not be validated, please fix and retry",variant:"error"})})))},toggleRevision:function(t){if(this.activeRevision&&this.currentRevision.id===t)return this.singleView(),void this.previewCurrent();this.previewRevision(t)},previewRevision:function(t,e){var n=this;this.$store.commit(a.UZ.UPDATE_REV,t),this.$store.dispatch(s.ZP.GET_REVISION).then((function(){e&&"function"===typeof e&&e()}),(function(t){n.$store.commit(a.qq.SET_NOTIF,{message:"Invalid revision.",variant:"error"})}))},compareView:function(){this.activeBreakpoint=0,this.slipScreen=!0,this.activeRevision&&this.loadCurrent()},singleView:function(){this.activeBreakpoint=this.lastActiveBreakpoint,this.slipScreen=!1},setIframeScroll:function(t){this.scrollPosition=t}}},vr=pr,hr=(0,g.Z)(vr,Qn,tr,!1,null,"b3a55fa0",null),mr=hr.exports,br=function(){var t=this,e=t._self._c;return e("a17-overlay",{ref:"overlay",attrs:{title:t.$trans("editor.title"),customClasses:t.htmlEditorClass},on:{close:t.close},scopedSlots:t._u([t.editorNames.length>1?{key:"overlay__header",fn:function(){return[e("a17-dropdown",{ref:"editorDropdown",attrs:{position:"bottom-left",maxWidth:400,maxHeight:300}},[e("a17-button",{staticClass:"editorDropdown__trigger",on:{click:function(e){return t.$refs.editorDropdown.toggle()}}},[t._v(" "+t._s(t.currentEditorLabel)+" "),e("span",{directives:[{name:"svg",rawName:"v-svg"}],attrs:{symbol:"dropdown_module"}})]),e("div",{attrs:{slot:"dropdown__content"},slot:"dropdown__content"},t._l(t.editorNames,(function(n){return e("button",{key:n.value,staticClass:"editorDropdown",attrs:{type:"button"},on:{click:function(e){return t.updateEditorName(n.value)}}},[t._v(" "+t._s(n.label)+" ")])})),0)],1)]},proxy:!0}:null],null,!0)},[e("a17-blocks-list",{attrs:{"editor-name":t.editorName},scopedSlots:t._u([{key:"default",fn:function(n){var r=n.availableBlocks,i=n.hasBlockActive,o=n.savedBlocks,a=n.editorNames,s=n.moveBlock;return[e("div",{staticClass:"editor"},[t.revisions.length?e("a17-button",{staticClass:"editor__leave",attrs:{variant:"editor",size:"small"},on:{click:t.openPreview}},[e("span",{directives:[{name:"svg",rawName:"v-svg"}],staticClass:"hide--xsmall",attrs:{symbol:"preview"}}),t._v(t._s(t.$trans("fields.block-editor.preview","Preview"))+" ")]):t._e(),e("div",{staticClass:"editor__frame"},[e("div",{staticClass:"editor__inner"},[e("div",{ref:"sidebar",staticClass:"editor__sidebar"},[e("a17-editorsidebar",{attrs:{"editor-name":t.editorName,hasBlockActive:i,editorNames:a,blocks:r},on:{"editorName:update":t.updateEditorName}},[t._v(" "+t._s(t.$trans("fields.block-editor.add-content","Add content"))+" ")])],1),e("div",{staticClass:"editor__resizer",on:{mousedown:t.resize}},[e("span")]),e("div",{staticClass:"editor__preview"},[t.editorOpen?e("a17-editorpreview",{ref:"previews",attrs:{"editor-name":t.editorName,blocks:o,hasBlockActive:i,sandbox:t.previewSandbox,bgColor:t.bgColor},on:{"blocks:move":s}}):t._e()],1)])])],1)]}}])})],1)},yr=[],gr=n(139),_r=function(){var t=this,e=t._self._c;return e("a17-blockeditor-model",{attrs:{"editor-name":t.editorName},scopedSlots:t._u([{key:"default",fn:function(n){var r=n.add,i=n.edit,o=n.unEdit;return[e("div",{staticClass:"editorPreview",class:t.previewClass,style:t.previewStyle,on:{mousedown:function(e){return t._unselectBlock(o)}}},[t.blocks.length?t._e():e("div",{staticClass:"editorPreview__empty"},[e("b",[t._v(t._s(t.$trans("previewer.drag-and-drop","Drag and drop content from the left navigation")))])]),e("draggable",{ref:"previewContent",staticClass:"editorPreview__content",attrs:{value:t.blocks,options:{group:"editorBlocks",handle:t.handle}},on:{add:function(e){return t.onAdd(r,i,e)},update:t.onUpdate}},[t._l(t.blocks,(function(n){return[e("a17-blockeditor-model",{key:n.id,attrs:{block:n,"editor-name":t.editorName},scopedSlots:t._u([{key:"default",fn:function(r){var i=r.block,o=r.isActive,a=r.blockIndex,s=r.move,l=r.remove,c=r.edit,u=r.unEdit,d=r.cloneBlock;return[e("a17-editor-block-preview",{key:n.id,ref:i.id,refInFor:!0,attrs:{block:i,blockIndex:a,blocksLength:t.blocks.length,isBlockActive:o},on:{"block:select":function(e){return t._selectBlock(c,a)},"block:unselect":function(e){return t._unselectBlock(u,a)},"block:move":s,"block:clone":function(e){return t._cloneBlock(d,a)},"block:delete":function(e){return t._deleteBlock(l)},"scroll-to":t.scrollToActive}})]}}],null,!0)})]}))],2),t.loading?e("a17-spinner",{attrs:{visible:!0}},[t._v(t._s(t.$trans("fields.block-editor.loading","Loading"))+"… ")]):t._e()],1)]}}])})},wr=[],Or=n(7621),kr=n.n(Or),Sr=n(6214),Pr=function(){var t=this,e=t._self._c;return e("div",{staticClass:"editorPreview__item",class:t.previewBlockItemClasses,on:{mousedown:function(t){t.stopPropagation()}}},[e("div",{staticClass:"editorPreview__frame"},[e("a17-editor-iframe",{ref:"blockIframe",attrs:{block:t.block},on:{loaded:t.iframeLoaded}})],1),e("div",{staticClass:"editorPreview__protector editorPreview__dragger",on:{click:function(e){return e.preventDefault(),t.handleBlockPreviewClick.apply(null,arguments)}}}),e("div",{staticClass:"editorPreview__header"},[e("a17-buttonbar",{attrs:{variant:"visible"}},[e("button",{attrs:{type:"button"},on:{click:t.cloneBlock}},[e("span",{directives:[{name:"svg",rawName:"v-svg"}],attrs:{symbol:"clone"}})]),t.blocksLength>1?e("a17-dropdown",{ref:"blockDropdown",staticClass:"f--small",attrs:{position:"bottom-left",maxHeight:270},on:{open:t.handleDropDownOpen,close:t.handleDropDownClose}},[e("button",{attrs:{type:"button"},on:{click:function(e){return t.toggleBlockDropdown(t.blockIndex)}}},[e("span",{directives:[{name:"svg",rawName:"v-svg"}],attrs:{symbol:"drag"}})]),e("div",{attrs:{slot:"dropdown__content"},slot:"dropdown__content"},t._l(t.blocksLength,(function(n){return e("button",{key:n,attrs:{type:"button"},on:{click:function(e){return t.moveBlock(n-1)}}},[t._v(" "+t._s(n)+" ")])})),0)]):t._e(),e("button",{attrs:{type:"button"},on:{click:t.deleteBlock}},[e("span",{directives:[{name:"svg",rawName:"v-svg"}],attrs:{symbol:"trash"}})])],1)],1)])},Er=[],Cr=function(){var t=this,e=t._self._c;return e("div",{staticClass:"editorIframe"},[""===t.preview?e("div",{staticClass:"editorIframe__empty"},[t._v(" "+t._s(t.title)+" ")]):[t.sandbox?e("iframe",{ref:"frame",attrs:{srcdoc:t.preview,sandbox:t.sandboxOptions,scrolling:"no"},on:{load:t.loadedPreview}}):e("iframe",{ref:"frame",attrs:{srcdoc:t.preview,scrolling:"no"},on:{load:t.loadedPreview}})]],2)},Lr=[];function xr(t){return xr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xr(t)}function Dr(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function jr(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Dr(Object(n),!0).forEach((function(e){Tr(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Dr(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Tr(t,e,n){return e=Ar(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ar(t){var e=Ir(t,"string");return"symbol"===xr(e)?e:String(e)}function Ir(t,e){if("object"!==xr(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==xr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var Br={name:"A17editorIframe",props:{block:{type:Object,default:function(){return{}}}},computed:jr({preview:function(){return this.previewsById(this.block.id)||""},title:function(){return this.block.title||""},sandboxOptions:function(){return"boolean"===typeof this.sandbox?"allow-same-origin allow-top-navigation allow-scripts":this.sandbox.join(" ")}},(0,i.Se)(["previewsById"])),inject:["sandbox"],methods:{loadedPreview:function(){this.$refs.frame&&this.$refs.frame.srcdoc&&(this.$emit("loaded",this.$refs.frame),this.resize())},resize:function(){var t=this;if(this.$refs.frame){var e=this.$refs.frame.contentWindow.document.body;e.style.overflow="hidden";var n=window.getComputedStyle(e),r=n.getPropertyValue("margin-top"),i=n.getPropertyValue("margin-bottom"),o=e.scrollHeight+parseInt(r)+parseInt(i);window.requestAnimationFrame((function(){t.$refs.frame.height=o+"px"}))}}},mounted:function(){window.addEventListener("resize",this.resize)},beforeDestroy:function(){window.removeEventListener("resize",this.resize)}},Rr=Br,Nr=(0,g.Z)(Rr,Cr,Lr,!1,null,"f2eb11aa",null),$r=Nr.exports,Vr=n(4690),Fr={name:"A17EditorPreviewBlockItem",props:{isBlockActive:{type:Boolean,default:!1}},mixins:[Vr.R0],components:{"a17-editor-iframe":$r},data:function(){return{dropdownOpen:!1}},computed:{previewBlockItemClasses:function(){return{"editorPreview__item--active":this.isBlockActive,"editorPreview__item--dropdown-open":this.dropdownOpen}}},methods:{handleBlockPreviewClick:function(){this.isBlockActive?this.unselectBlock():this.selectBlock()},handleDropDownOpen:function(){this.dropdownOpen=!0},handleDropDownClose:function(){this.dropdownOpen=!1},iframeLoaded:function(){var t=this;this.isBlockActive&&this.$nextTick((function(){t.$emit("scroll-to",t.$el.offsetTop)}))}},beforeDestroy:function(){this.unselectBlock()}},Mr=Fr,Zr=(0,g.Z)(Mr,Pr,Er,!1,null,"022e4340",null),Ur=Zr.exports,zr=n(1124),Wr={name:"A17editorPreview",props:{bgColor:{type:String,default:"#FFFFFF"},hasBlockActive:{props:{type:Boolean,default:!1}}},mixins:[Vr.tD,Vr.NF],components:{draggable:Ye(),"a17-editor-block-preview":Ur,"a17-blockeditor-model":Sr["default"],"a17-spinner":zr.Z},data:function(){return{loading:!1,blockSelectIndex:-1,handle:".editorPreview__dragger"}},computed:{previewClass:function(){var t=kr()(this.bgColor);return{"editorPreview--dark":t.getBrightness()<180,"editorPreview--loading":this.loading}},previewStyle:function(){return{"background-color":this.bgColor}}},methods:{onAdd:function(t,e,n){var r=n.item,i={};i.title=r.getAttribute("data-title"),i.component=r.getAttribute("data-component"),i.icon=r.getAttribute("data-icon");var o=Math.max(0,n.newIndex);this.addAndEditBlock(t,e,{block:i,index:o}),this._selectBlock(null,o)},onUpdate:function(t){var e=t.oldIndex,n=t.newIndex;this.$emit("blocks:move",{oldIndex:e,newIndex:n})},_selectBlock:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;e&&this.selectBlock(e,n),this.blockSelectIndex!==n&&(this.unSubscribe(),this.blockSelectIndex=n,this._unSubscribeInternal=this.$store.subscribe((function(e){a.c6.REFRESH_BLOCK_PREVIEW.includes(e.type)&&(a.c6.REFRESH_BLOCK_PREVIEW_ALL.includes(e.type)?t.getAllPreviews():t.getPreview(n))})))},_unselectBlock:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.blockSelectIndex;this.unSubscribe(),this.getPreview(e),this.unselectBlock(t,e),this.blockSelectIndex=-1},_deleteBlock:function(t){this.unSubscribe(),this.deleteBlock(t)},_cloneBlock:function(t,e){this.cloneBlock(t),this.getPreview(e+1)},unSubscribe:function(){this._unSubscribeInternal&&(this._unSubscribeInternal(),this._unSubscribeInternal=null)},getAllPreviews:function(){var t=this;this.loading=!0,this.$store.dispatch(s.ZP.GET_ALL_PREVIEWS,{editorName:this.editorName}).then((function(){t.$nextTick((function(){t.loading=!1}))}))},getPreview:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;this.loading=!0,this.$store.dispatch(s.ZP.GET_PREVIEW,{editorName:this.editorName,index:e}).then((function(){t.$nextTick((function(){t.loading=!1}))}))},scrollToActive:function(t){this.$refs.previewContent.$el.scrollTop=Math.max(0,t-20)},resizeAllIframes:function(){this.$refs.blockPreview&&this.$refs.blockPreview.forEach((function(t){t.$refs.blockIframe.resize()}))},_resize:h()((function(){this.resizeAllIframes()}),200),init:function(){window.addEventListener("resize",this._resize)},dispose:function(){window.removeEventListener("resize",this._resize)}},mounted:function(){var t=this;this.init(),this.$nextTick((function(){t.getAllPreviews()}))},beforeDestroy:function(){this.dispose()},watch:{editorName:function(){this.unSubscribe(),this.getAllPreviews()},hasBlockActive:function(t){t||(this.unSubscribe(),this.blockSelectIndex=-1)}}},Gr=Wr,Yr=(0,g.Z)(Gr,_r,wr,!1,null,"822d85b0",null),qr=Yr.exports,Hr=function(){var t=this,e=t._self._c;return e("div",{staticClass:"editorSidebar"},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.hasBlockActive,expression:"hasBlockActive"}]},[e("a17-blocks-list",{attrs:{"editor-name":t.editorName},scopedSlots:t._u([{key:"default",fn:function(n){var r=n.allSavedBlocks;return[e("div",{staticClass:"editorSidebar__edit-list"},t._l(r,(function(n){return e("a17-blockeditor-model",{key:n.id,attrs:{block:n,"editor-name":t.editorName},scopedSlots:t._u([{key:"default",fn:function(n){var i=n.block,o=n.isActive,a=n.blockIndex,s=n.move,l=n.remove,c=n.unEdit;return[e("div",{staticClass:"editorSidebar__edit-block"},[e("a17-sidebar-block-item",{directives:[{name:"show",rawName:"v-show",value:o,expression:"isActive"}],attrs:{block:i,blockIndex:a,blocksLength:r.length},on:{"block:move":s,"block:delete":function(e){return t.deleteBlock(l)}}}),e("div",{staticClass:"editorSidebar__actions"},[e("a17-button",{attrs:{variant:"action"},on:{click:function(e){return t.saveBlock(c,a)}}},[t._v(" "+t._s(t.$trans("editor.done"))+" ")]),e("a17-button",{attrs:{variant:"secondary"},on:{click:function(e){return t.cancelBlock(c,a)}}},[t._v(" "+t._s(t.$trans("editor.cancel"))+" ")])],1)],1)]}}],null,!0)})})),1)]}}])})],1),t.hasBlockActive?t._e():[e("div",{staticClass:"editorSidebar__list"},[e("a17-sidebar-block-list",{attrs:{blocks:t.blocks}})],1),e("div",{staticClass:"editorSidebar__actions"},[t.isSubmitDisabled(t.submitOptions[0])?e("a17-button",{attrs:{variant:"validate",disabled:!0}},[t._v(t._s(t.submitOptions[0].text))]):e("a17-button",{attrs:{name:t.submitOptions[0].name,variant:"validate"},on:{click:function(e){return t.saveForm(t.submitOptions[0].name)}}},[t._v(t._s(t.submitOptions[0].text))])],1)]],2)},Kr=[],Jr=function(){var t=this,e=t._self._c;return e("div",{staticClass:"editorSidebar__item"},[e("div",{staticClass:"editorSidebar__title"},[e("div",{staticClass:"editorSidebar__blockTitle"},[e("a17-dropdown",{ref:"blockDropdown",staticClass:"f--small",attrs:{position:"bottom-left",maxHeight:270}},[e("span",{staticClass:"editorSidebar__counter f--tiny",on:{click:t.toggleBlockDropdown}},[t._v(t._s(t.blockIndex+1))]),e("div",{attrs:{slot:"dropdown__content"},slot:"dropdown__content"},t._l(t.blocksLength,(function(n){return e("button",{key:n,attrs:{type:"button"},on:{click:function(e){return t.moveBlock(n-1)}}},[t._v(" "+t._s(n)+" ")])})),0)]),t._v(" "+t._s(t.block.title)+" ")],1),e("span",[e("a",{staticClass:"f--small f--note f--underlined",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.deleteBlock.apply(null,arguments)}}},[t._v(t._s(t.$trans("editor.delete")))])])]),e("div",{staticClass:"editorSidebar__body"},[e("a17-inputframe",{attrs:{label:"",name:"block.".concat(t.block.id)}}),[e("".concat(t.block.type),t._b({key:"`editor_${block.type}_${block.id}`",tag:"component",attrs:{name:"blocks[".concat(t.block.id,"]")}},"component",t.setBlockAttributes(t.block.attributes),!1))]],2)])},Xr=[];function Qr(t){return Qr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qr(t)}function ti(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ei(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ti(Object(n),!0).forEach((function(e){ni(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ti(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ni(t,e,n){return e=ri(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ri(t){var e=ii(t,"string");return"symbol"===Qr(e)?e:String(e)}function ii(t,e){if("object"!==Qr(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==Qr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var oi={name:"A17EditorSidebarBlockItem",mixins:[Vr.R0],methods:{setBlockAttributes:function(t){return ei({keepAlive:!0},t)}}},ai=oi,si=(0,g.Z)(ai,Jr,Xr,!1,null,"1275ea0e",null),li=si.exports,ci=function(){var t=this,e=t._self._c;return e("div",{staticClass:"editorSidebar__listItems"},[e("draggable",{staticClass:"editorSidebar__blocks",class:t.editorSidebarClasses,attrs:{options:{group:{name:"editorBlocks",pull:"clone",put:!1},handle:".editorSidebar__button"}},model:{value:t.blocks,callback:function(e){t.blocks=e},expression:"blocks"}},t._l(t.blocks,(function(n){return e("div",{key:n.component,staticClass:"editorSidebar__button",attrs:{"data-title":n.title,"data-icon":n.icon,"data-component":n.component}},[e("span",{directives:[{name:"svg",rawName:"v-svg"}],attrs:{symbol:t.iconSymbol(n.icon)}}),e("span",{staticClass:"editorSidebar__buttonLabel"},[t._v(t._s(n.title))])])})),0)],1)},ui=[],di={name:"A17EditorSidebarBlockList",props:{blocks:{type:Array,default:function(){return[]}},inFieldset:{type:Boolean,default:!1}},mixins:[Vr.tD],components:{draggable:Ye()},computed:{editorSidebarClasses:function(){return{"editorSidebar__blocks--in-fieldset":this.inFieldset}}},methods:{iconSymbol:function(t){return this.hasLgIconVariation(t)?"".concat(t,"-lg"):t},hasLgIconVariation:function(t){return Boolean(document.querySelector("#icon--".concat(t,"-lg")))}}},fi=di,pi=(0,g.Z)(fi,ci,ui,!1,null,"0f803405",null),vi=pi.exports,hi={name:"A17editorSidebar",props:{hasBlockActive:{type:Boolean,default:!1},activeBlock:{type:Object,default:function(){}},editorName:{type:String,required:!0},editorNames:{type:Array,default:function(){return[]}}},components:{"a17-sidebar-block-item":li,"a17-sidebar-block-list":vi,"a17-blocks-list":gr["default"],"a17-blockeditor-model":Sr["default"]},mixins:[Vr.NF],computed:{submitOptions:function(){return this.$store.getters.getSubmitOptions}},methods:{isSubmitDisabled:function(t){return!!t.hasOwnProperty("disabled")&&!0===t.disabled},saveForm:function(t){this.$store.commit(a.V1.UPDATE_SAVE_TYPE,t),this.$root.submitForm&&this.$root.submitForm()}}},mi=hi,bi=(0,g.Z)(mi,Hr,Kr,!1,null,"7c217157",null),yi=bi.exports;function gi(t){return gi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gi(t)}function _i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function wi(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_i(Object(n),!0).forEach((function(e){Oi(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Oi(t,e,n){return e=ki(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ki(t){var e=Si(t,"string");return"symbol"===gi(e)?e:String(e)}function Si(t,e){if("object"!==gi(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==gi(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var Pi,Ei={name:"A17Editor",components:{"a17-editorsidebar":yi,"a17-editorpreview":qr,"a17-blocks-list":gr["default"]},props:{bgColor:{type:String,default:"#FFFFFF"},previewSandbox:{type:[Boolean,Array],default:!0}},data:function(){return{editorName:null,editorOpen:!1,htmlEditorClass:Vn.Z.editor}},computed:wi(wi(wi({currentEditorLabel:function(){var t=this,e=this.editorNames&&this.editorNames.find((function(e){return e.value===t.editorName}));return e&&e.label}},(0,i.rn)({revisions:function(t){return t.revision.all},editorNamesBase:function(t){return t.blocks.editorNames}})),(0,i.Se)(["blocks"])),{},{editorNames:function(){return this.editorNamesBase.filter((function(t){return!1===t.nested}))}}),provide:function(){return{sandbox:this.previewSandbox}},methods:{initEditorName:function(){if(!this.editorName){var t=this.editorNames[0]&&this.editorNames[0].value;this.updateEditorName(t)}},updateEditorName:function(t){this.editorName!==t&&(this.editorName=t)},open:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e&&this.updateEditorName(e),this.editorOpen=!0,this.$refs.overlay.open()},close:function(){this.editorOpen=!1},resize:function(){window.addEventListener("mousemove",this.resizeSidebar,!1),window.addEventListener("mouseup",this.stopResizeSidebar,!1)},resizeSidebar:function(t){var e=this.$refs.sidebar,n=window.innerWidth;e&&(e.style.width=(t.clientX-e.offsetLeft)/n*100+"%")},stopResizeSidebar:function(){window.removeEventListener("mousemove",this.resizeSidebar,!1),window.removeEventListener("mouseup",this.stopResizeSidebar,!1),this.$refs.previews.resizeAllIframes()},openPreview:function(){this.$root.$refs.preview&&this.$root.$refs.preview.open()}},created:function(){this.initEditorName()}},Ci=Ei,Li=(0,g.Z)(Ci,br,yr,!1,null,"05dfc68c",null),xi=Li.exports,Di=n(3268),ji=n(6808),Ti=function(){var t=this,e=t._self._c;return e("a17-modal",{ref:"modal",staticClass:"modal--form",attrs:{title:t.modalTitle,forceClose:!0}},[e("form",{attrs:{action:t.formCreate},on:{submit:function(e){return e.preventDefault(),t.submit.apply(null,arguments)}}},[t._t("default"),e("a17-modal-validation",{attrs:{"is-disable":!0}})],2)])},Ai=[],Ii=n(5512),Bi={name:"A17ModalAdd",mixins:[Ii.Z],props:{name:{type:String,default:""},modalTitle:{type:String,default:"Add new"},formCreate:{type:String,default:"#"}},components:{"a17-modal-validation":E.Z},methods:{open:function(){this.$refs.modal&&this.$refs.modal.open()},submit:function(){if(this.isSubmitPrevented)this.shouldRetrySubmitWhenAllowed=!0;else if(!this._isSubmitting){this._isSubmitting=!0;var t=this;this.$store.commit(a.Yc.UPDATE_FORM_LOADING,!0);var e=document.activeElement.name;this.$nextTick((function(){this.$store.dispatch(s.ZP.CREATE_FORM_IN_MODAL,{name:this.name,endpoint:this.formCreate,method:"post"}).then((function(){t.$refs.modal&&t.$refs.modal.close(),t.$nextTick((function(){t.$store.commit(a.qq.SET_NOTIF,{message:"Your content has been added",variant:"success"}),"create-another"===e&&t.$refs.modal&&t.$refs.modal.open()}))}),(function(e){t.$store.commit(a.qq.SET_NOTIF,{message:"Your content can not be added, please retry",variant:"error"})}))}))}}}},Ri=Bi,Ni=(0,g.Z)(Ri,Ti,Ai,!1,null,null,null),$i=Ni.exports,Vi=n(890);function Fi(t){return Fi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fi(t)}function Mi(t,e,n){return e=Zi(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Zi(t){var e=Ui(t,"string");return"symbol"===Fi(e)?e:String(e)}function Ui(t,e){if("object"!==Fi(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==Fi(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var zi,Wi,Gi={withPublicationToggle:window["TWILL"].STORE.publication.withPublicationToggle||!1,published:window["TWILL"].STORE.publication.published||!1,publishSubmit:window["TWILL"].STORE.publication.published||!window["TWILL"].STORE.publication.withPublicationToggle?"update":"live",publishedLabel:window["TWILL"].STORE.publication.publishedLabel||"Live",draftLabel:window["TWILL"].STORE.publication.draftLabel||"Draft",expiredLabel:window["TWILL"].STORE.publication.expiredLabel||"Expired",scheduledLabel:window["TWILL"].STORE.publication.scheduledLabel||"Scheduled",withPublicationTimeframe:window["TWILL"].STORE.publication.withPublicationTimeframe||!1,startDate:window["TWILL"].STORE.publication.startDate||null,endDate:window["TWILL"].STORE.publication.endDate||null,visibility:window["TWILL"].STORE.publication.visibility||!1,reviewProcess:window["TWILL"].STORE.publication.reviewProcess||[],userInfo:window["TWILL"].STORE.publication.userInfo||null,createWithoutModal:window["TWILL"].STORE.publication.createWithoutModal||!1,hasUnsavedChanges:!1,saveType:void 0,visibilityOptions:[{value:"public",label:"Public"},{value:"private",label:"Private"}],submitDisableMessage:window["TWILL"].STORE.publication.submitDisableMessage||"",submitOptions:window["TWILL"].STORE.publication.submitOptions||{draft:[{name:"save",text:window.$trans("publisher.save","Save as draft"),disabled:!1},{name:"save-close",text:window.$trans("publisher.save-close","Save as draft and close"),disabled:!1},{name:"save-new",text:window.$trans("publisher.save-new","Save as draft and create new"),disabled:!1},{name:"cancel",text:window.$trans("publisher.cancel","Cancel"),disabled:!1}],live:[{name:"publish",text:window.$trans("publisher.publish","Publish"),disabled:!1},{name:"publish-close",text:window.$trans("publisher.publish-close","Publish and close"),disabled:!1},{name:"publish-new",text:window.$trans("publisher.publish-new","Publish and create new"),disabled:!1},{name:"cancel",text:window.$trans("publisher.cancel","Cancel"),disabled:!1}],update:[{name:"update",text:window.$trans("publisher.update","Update"),disabled:!1},{name:"update-close",text:window.$trans("publisher.update-close","Update and close"),disabled:!1},{name:"update-new",text:window.$trans("publisher.update-new","Update and create new"),disabled:!1},{name:"cancel",text:window.$trans("publisher.cancel","Cancel"),disabled:!1}]}},Yi={reviewProcessComplete:function(t){return t.reviewProcess.filter((function(t){return t.checked}))},getSubmitOptions:function(t){return t.published||!t.withPublicationToggle?t.submitOptions[t.publishSubmit]:t.submitOptions.draft},isEnabledSubmitOption:function(t,e){return function(t){var n=!0,r={},i=e.getSubmitOptions.filter((function(e){return e.name===t}));return i.length&&(r=i[0]),r.hasOwnProperty("disabled")&&(n=!r.disabled),n}},getSaveType:function(t,e){return t.saveType||e.getSubmitOptions[0].name}},qi=(Pi={},Mi(Pi,a.V1.UPDATE_PUBLISH_START_DATE,(function(t,e){t.startDate=e})),Mi(Pi,a.V1.UPDATE_PUBLISH_END_DATE,(function(t,e){t.endDate=e})),Mi(Pi,a.V1.UPDATE_PUBLISH_STATE,(function(t,e){t.published=e})),Mi(Pi,a.V1.UPDATE_PUBLISH_SUBMIT,(function(t){t.publishSubmit=t.published||!t.withPublicationToggle?"update":"live"})),Mi(Pi,a.V1.UPDATE_PUBLISH_VISIBILITY,(function(t,e){t.visibility=e})),Mi(Pi,a.V1.UPDATE_REVIEW_PROCESS,(function(t,e){var n="",r=-1;e.length&&(n=e[e.length-1],t.reviewProcess.forEach((function(t,e){t.value===n&&(r=e)}))),t.reviewProcess.forEach((function(t,e){t.checked=e<=r,t.disabled=!(e===r||e===r+1)}))})),Mi(Pi,a.V1.UPDATE_SAVE_TYPE,(function(t,e){t.saveType=e})),Mi(Pi,a.V1.UPDATE_HAS_UNSAVED_CHANGES,(function(t,e){t.hasUnsavedChanges=e})),Pi),Hi={state:Gi,getters:Yi,mutations:qi},Ki=n(9065),Ji=n(9669),Xi=n.n(Ji),Qi=n(3827),to={getBlockPreview:function(t,e,n,r){Xi().post(t,e).then((function(t){n&&"function"===typeof n&&n(t.data)}),(function(t){var e={message:"Block preview request error.",value:t};(0,Qi.I)("CONTENT",e),r&&"function"===typeof r&&r(t)}))}};function eo(t){return eo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},eo(t)}function no(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */no=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(L){l=function(t,e,n){return t[e]=n}}function c(t,e,n,i){var o=e&&e.prototype instanceof f?e:f,a=Object.create(o.prototype),s=new P(i||[]);return r(a,"_invoke",{value:w(t,n,s)}),a}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(L){return{type:"throw",arg:L}}}t.wrap=c;var d={};function f(){}function p(){}function v(){}var h={};l(h,o,(function(){return this}));var m=Object.getPrototypeOf,b=m&&m(m(E([])));b&&b!==e&&n.call(b,o)&&(h=b);var y=v.prototype=f.prototype=Object.create(h);function g(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function i(r,o,a,s){var l=u(t[r],t,o);if("throw"!==l.type){var c=l.arg,d=c.value;return d&&"object"==eo(d)&&n.call(d,"__await")?e.resolve(d.__await).then((function(t){i("next",t,a,s)}),(function(t){i("throw",t,a,s)})):e.resolve(d).then((function(t){c.value=t,a(c)}),(function(t){return i("throw",t,a,s)}))}s(l.arg)}var o;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){i(t,n,e,r)}))}return o=o?o.then(r,r):r()}})}function w(t,e,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return C()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=O(a,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=u(t,e,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}function O(t,e){var n=e.method,r=t.iterator[n];if(void 0===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,O(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var i=u(r,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,d;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,d):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function E(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:C}}function C(){return{value:void 0,done:!0}}return p.prototype=v,r(y,"constructor",{value:v,configurable:!0}),r(v,"constructor",{value:p,configurable:!0}),p.displayName=l(v,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,l(t,s,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},g(_.prototype),l(_.prototype,a,(function(){return this})),t.AsyncIterator=_,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new _(c(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(y),l(y,s,"Generator"),l(y,o,(function(){return this})),l(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=E,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),l=n.call(o,"finallyLoc");if(s&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:E(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},t}function ro(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(c){return void n(c)}s.done?e(l):Promise.resolve(l).then(r,i)}function io(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){ro(o,r,i,a,s,"next",t)}function s(t){ro(o,r,i,a,s,"throw",t)}a(void 0)}))}}function oo(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ao(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?oo(Object(n),!0).forEach((function(e){so(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oo(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function so(t,e,n){return e=lo(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lo(t){var e=co(t,"string");return"symbol"===eo(e)?e:String(e)}function co(t,e){if("object"!==eo(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==eo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var uo,fo,po={loading:!1,editor:window["TWILL"].STORE.form.editor||!1,editorNames:window["TWILL"].STORE.form.editorNames||[],available:window["TWILL"].STORE.form.availableBlocks||{},blocks:window["TWILL"].STORE.form.blocks||{},previews:window["TWILL"].STORE.form.previews||{},active:{}},vo={previewsById:function(t){return function(e){return t.previews[e]?t.previews[e]:""}},blocks:function(t){return function(e){return t.blocks[e]||[]}},availableBlocks:function(t){return function(e){return t.available[e]||[]}},blockIndex:function(t,e){return function(t,n){return e.blocks(n).findIndex((function(e){return e.id===t.id}))}}},ho=function(){return Date.now()+Math.floor(1e3*Math.random())},mo=(zi={},so(zi,a.RG.ADD_BLOCK,(function(t,e){var n=e.block,i=e.index,o=e.editorName,a=t.blocks[o]||[],s=ao(ao({},n),{},{id:ho(),name:o});s.twillUi={},s.twillUi.isNew=!0,i>-1?a.splice(i,0,s):a.push(s),r.ZP.set(t.blocks,o,a)})),so(zi,a.RG.MOVE_BLOCK,(function(t,e){var n=e.editorName,i=e.newIndex,o=e.oldIndex,a=t.blocks[n]||[];if(i>=a.length){var s=i-a.length;while(1+s--)a.push(void 0)}a.splice(i,0,a.splice(o,1)[0]),r.ZP.set(t.blocks,n,a)})),so(zi,a.RG.DELETE_BLOCK,(function(t,e){var n=e.editorName,i=e.index,o=t.blocks[n][i].id,a=t.blocks[n]||[];o&&r.ZP["delete"](t.previews,o),a.splice(i,1),r.ZP.set(t.blocks,n,a)})),so(zi,a.RG.DUPLICATE_BLOCK,(function(t,e){var n=e.editorName,i=e.index,o=e.block,a=e.id,s=t.blocks[n]||[];s.splice(i,0,ao(ao({},o),{},{id:a,name:n})),r.ZP.set(t.blocks,n,s)})),so(zi,a.RG.REORDER_BLOCKS,(function(t,e){var n=e.editorName,i=e.value;r.ZP.set(t.blocks,n,i)})),so(zi,a.RG.ACTIVATE_BLOCK,(function(t,e){var n=e.editorName,r=e.index;t.blocks[n]&&t.blocks[n][r]?t.active=ao({},t.blocks[n][r]):t.active={}})),so(zi,a.RG.ADD_BLOCK_PREVIEW,(function(t,e){r.ZP.set(t.previews,e.id,e.html)})),so(zi,a.RG.UPDATE_PREVIEW_LOADING,(function(t,e){t.loading=!t.loading})),zi),bo=function(t,e,n,r){if(t&&t.hasOwnProperty("id")){var i=(0,Ki.BI)(t,n);n.language.all.length>1&&(i.activeLanguage=n.language.active.value),(0,Ki.oH)(i)?(e(a.RG.ADD_BLOCK_PREVIEW,{id:t.id,html:""}),r&&"function"===typeof r&&r()):to.getBlockPreview(n.form.blockPreviewUrl,i,(function(n){e(a.RG.ADD_BLOCK_PREVIEW,{id:t.id,html:n}),r&&"function"===typeof r&&r()}),(function(t){}))}},yo=(Wi={},so(Wi,s.ZP.GET_PREVIEW,(function(t,e){var n=t.commit,r=t.state,i=t.rootState,o=e.editorName,a=e.index,s=void 0===a?-1:a,l=r.blocks[o]&&s>=0?ao({},r.blocks[o][s]):{};r.active&&r.active.hasOwnProperty("id")&&-1===s&&(l=ao({},r.active)),bo(l,n,i)})),so(Wi,s.ZP.GET_ALL_PREVIEWS,(function(t,e){var n=t.commit,r=t.state,i=t.rootState,o=e.editorName;if(r.blocks[o]&&r.blocks[o].length>0&&!r.loading){n(a.RG.UPDATE_PREVIEW_LOADING,!0);var s=0,l=r.blocks[o].length;Object.values(r.blocks[o]).forEach((function(t){bo(t,n,i,(function(){s++,s===l&&n(a.RG.UPDATE_PREVIEW_LOADING,!0)}))}))}})),so(Wi,s.ZP.DUPLICATE_BLOCK,(function(t,e){return io(no().mark((function n(){var r,i,o,s,l;return no().wrap((function(n){while(1)switch(n.prev=n.next){case 0:r=t.commit,t.state,t.rootState,i=e.editorName,o=e.futureIndex,s=e.block,l=e.id,r(a.RG.DUPLICATE_BLOCK,{editorName:i,index:o,block:s,id:l});case 3:case"end":return n.stop()}}),n)})))()})),so(Wi,s.ZP.MOVE_BLOCK_TO_EDITOR,(function(t,e){return io(no().mark((function n(){var r,i,o,l,c,u,d;return no().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.commit,i=t.dispatch,o=e.editorName,l=e.index,c=e.block,u=e.futureIndex,d=e.id,n.next=4,i(s.ZP.DUPLICATE_BLOCK,{editorName:o,futureIndex:u,block:c,id:d});case 4:r(a.RG.DELETE_BLOCK,{editorName:c.name,index:l});case 5:case"end":return n.stop()}}),n)})))()})),Wi),go={state:po,getters:vo,mutations:mo,actions:yo},_o=n(6625),wo={getRevisionContent:function(t,e,n,r){Xi().put(t,e).then((function(t){n&&"function"===typeof n&&n(t.data)}),(function(t){var e={message:"Preview request error.",value:t};(0,Qi.I)("REVISION",e),r&&"function"===typeof r&&r(t)}))}};function Oo(t){return Oo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Oo(t)}function ko(t,e,n){return e=So(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function So(t){var e=Po(t,"string");return"symbol"===Oo(e)?e:String(e)}function Po(t,e){if("object"!==Oo(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==Oo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var Eo,Co,Lo={loading:!1,active:{},activeContent:"",currentContent:"",all:window["TWILL"].STORE.revisions||[]},xo={},Do=(uo={},ko(uo,a.UZ.LOADING_REV,(function(t){t.loading=!0})),ko(uo,a.UZ.UPDATE_REV,(function(t,e){function n(t){return t.id===e}var r=t.all.findIndex(n);t.active=-1!==r?t.all[r]:{}})),ko(uo,a.UZ.UPDATE_REV_CONTENT,(function(t,e){t.loading=!1,t.activeContent=e})),ko(uo,a.UZ.UPDATE_REV_CURRENT_CONTENT,(function(t,e){t.loading=!1,t.currentContent=e})),ko(uo,a.UZ.UPDATE_REV_ALL,(function(t,e){t.all=e})),uo),jo=(fo={},ko(fo,s.ZP.GET_CURRENT,(function(t){var e=t.commit,n=t.rootState;return new Promise((function(t,r){e(a.UZ.LOADING_REV);var i=(0,Ki.zi)(n);n.language.all.length>1&&(i.activeLanguage=n.language.active.value),wo.getRevisionContent(n.form.previewUrl,i,(function(n){e(a.UZ.UPDATE_REV_CURRENT_CONTENT,n),t()}),(function(t){r(t)}))}))})),ko(fo,s.ZP.GET_REVISION,(function(t){var e=t.commit,n=t.state,r=t.rootState;return new Promise((function(t,i){e(a.UZ.LOADING_REV);var o=0;o=0===Object.keys(n.active).length?n.all[0].id:n.active.id;var s={revisionId:o};r.language.all.length>1&&(s.activeLanguage=r.language.active.value),wo.getRevisionContent(r.form.previewUrl,s,(function(n){e(a.UZ.UPDATE_REV_CONTENT,n),t()}),(function(t){i(t)}))}))})),fo),To={state:Lo,getters:xo,actions:jo,mutations:Do},Ao=n(2374);function Io(t){return Io="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Io(t)}function Bo(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ro(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Bo(Object(n),!0).forEach((function(e){Fo(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Bo(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function No(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */No=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(L){l=function(t,e,n){return t[e]=n}}function c(t,e,n,i){var o=e&&e.prototype instanceof f?e:f,a=Object.create(o.prototype),s=new P(i||[]);return r(a,"_invoke",{value:w(t,n,s)}),a}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(L){return{type:"throw",arg:L}}}t.wrap=c;var d={};function f(){}function p(){}function v(){}var h={};l(h,o,(function(){return this}));var m=Object.getPrototypeOf,b=m&&m(m(E([])));b&&b!==e&&n.call(b,o)&&(h=b);var y=v.prototype=f.prototype=Object.create(h);function g(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function i(r,o,a,s){var l=u(t[r],t,o);if("throw"!==l.type){var c=l.arg,d=c.value;return d&&"object"==Io(d)&&n.call(d,"__await")?e.resolve(d.__await).then((function(t){i("next",t,a,s)}),(function(t){i("throw",t,a,s)})):e.resolve(d).then((function(t){c.value=t,a(c)}),(function(t){return i("throw",t,a,s)}))}s(l.arg)}var o;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){i(t,n,e,r)}))}return o=o?o.then(r,r):r()}})}function w(t,e,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return C()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=O(a,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=u(t,e,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}function O(t,e){var n=e.method,r=t.iterator[n];if(void 0===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,O(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var i=u(r,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,d;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,d):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function E(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:C}}function C(){return{value:void 0,done:!0}}return p.prototype=v,r(y,"constructor",{value:v,configurable:!0}),r(v,"constructor",{value:p,configurable:!0}),p.displayName=l(v,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,l(t,s,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},g(_.prototype),l(_.prototype,a,(function(){return this})),t.AsyncIterator=_,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new _(c(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(y),l(y,s,"Generator"),l(y,o,(function(){return this})),l(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=E,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),l=n.call(o,"finallyLoc");if(s&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:E(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},t}function $o(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(c){return void n(c)}s.done?e(l):Promise.resolve(l).then(r,i)}function Vo(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){$o(o,r,i,a,s,"next",t)}function s(t){$o(o,r,i,a,s,"throw",t)}a(void 0)}))}}function Fo(t,e,n){return e=Mo(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Mo(t){var e=Zo(t,"string");return"symbol"===Io(e)?e:String(e)}function Zo(t,e){if("object"!==Io(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==Io(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function Uo(t){return Yo(t)||Go(t)||Wo(t)||zo()}function zo(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Wo(t,e){if(t){if("string"===typeof t)return qo(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?qo(t,e):void 0}}function Go(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function Yo(t){if(Array.isArray(t))return qo(t)}function qo(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Ho={repeaters:window["TWILL"].STORE.form.repeaters||{},availableRepeaters:window["TWILL"].STORE.form.availableRepeaters||{}},Ko={repeatersByBlockId:function(t){return function(e){var n=Object.keys(t.repeaters).filter((function(t){return t.startsWith("blocks-".concat(e))})),r={};return n.forEach((function(e){return r[e]=t.repeaters[e]})),r}}};function Jo(){return Date.now()+Math.floor(1e3*Math.random())}var Xo=(Eo={},Fo(Eo,a.Yc.ADD_FORM_BLOCK,(function(t,e){var n=e.name,r=e.type,i={},o=t.availableRepeaters[r],a=!t.repeaters[n];if(o)if(i.id=Jo(),i.type=o.component,i.title=o.title,i.twillUi={},i.twillUi.isNew=!0,a){var s={};s[n]=[],s[n].push(i),t.repeaters=Object.assign({},t.repeaters,s)}else t.repeaters[n].push(i)})),Fo(Eo,a.Yc.ADD_REPEATER_FROM_SELECTION,(function(t,e){var n=this,r=e.name,i=e.type,o=t.availableRepeaters[i],s=!t.repeaters[r];if(o){var l={};l[r]=[],e.selection.forEach((function(e){var i={};i.id=Jo(),i.type=o.component,i.title=o.title,i.repeater_target_id=e.id;var c=[];for(var u in e.repeaterFields)e.repeaterFields.hasOwnProperty(u)&&c.push({name:"blocks[".concat(i.id,"][").concat(u,"]"),value:e.repeaterFields[u]});n.commit(a.Yc.ADD_FORM_FIELDS,c),s?l[r].push(i):t.repeaters[r].push(i)})),s&&(t.repeaters=Object.assign({},t.repeaters,l))}})),Fo(Eo,a.Yc.DELETE_FORM_BLOCK,(function(t,e){t.repeaters[e.name].splice(e.index,1)})),Fo(Eo,a.Yc.DUPLICATE_FORM_BLOCK,(function(t,e){var n=Object.assign({},t.repeaters[e.name][e.index]);n.id=Jo(),n.twillUi={},n.twillUi.isNew=!0,t.repeaters[e.name].splice(e.index+1,0,n);var r=Uo(Ko.fieldsByBlockId(e.id)),i=[];r.forEach((function(t){i.push({name:t.name.replace(e.id,n.id),value:t.value})})),this.commit(a.Yc.ADD_FORM_FIELDS,i)})),Fo(Eo,a.Yc.REORDER_FORM_BLOCKS,(function(t,e){var n={};n[e.name]=e.blocks,t.repeaters=Object.assign({},t.repeaters,n)})),Fo(Eo,a.Yc.ADD_REPEATERS,(function(t,e){var n=e.repeaters;t.repeaters=Object.assign({},t.repeaters,n)})),Eo),Qo=(Co={},Fo(Co,s.ZP.DUPLICATE_REPEATER,(function(t,e){return Vo(No().mark((function n(){var r,i,o,s,l,c,u,d,f,p,v;return No().wrap((function(n){while(1)switch(n.prev=n.next){case 0:r=t.state,i=t.commit,o=t.getters,s=e.editorName,l=e.block,c=e.index,u=e.id,d=Object.assign({},r.repeaters[s][c]),d.id=u,d.twillUi={},d.twillUi.isNew=!0,f={},f[s]=Uo(r.repeaters[s]),f[s].splice(c+1,0,d),p=Uo(o.fieldsByBlockId(l.id)),v=[],p.forEach((function(t){v.push({name:t.name.replace(l.id,d.id),value:JSON.parse(JSON.stringify(t.value))})})),i(a.Yc.ADD_FORM_FIELDS,v),i(a.Yc.ADD_REPEATERS,{repeaters:f});case 14:case"end":return n.stop()}}),n)})))()})),Fo(Co,s.ZP.DUPLICATE_BLOCK,(function(t,e){return Vo(No().mark((function n(){var r,i,o,s,l,c,u,d;return No().wrap((function(n){while(1)switch(n.prev=n.next){case 0:r=t.commit,i=t.getters,o=e.block,s=e.id,l=Ro({},i.repeatersByBlockId(o.id)),c=Object.keys(l),u={},c.forEach((function(t){return u[t.replace(o.id,s)]=Uo(l[t])})),d=[],Object.keys(u).forEach((function(t){u[t].forEach((function(e,n){var r=Date.now()+Math.floor(1e3*Math.random()),o=Uo(i.fieldsByBlockId(e.id));u[t][n]=Ro(Ro({},u[t][n]),{},{id:r}),o.forEach((function(t){d.push({name:t.name.replace(e.id,r),value:JSON.parse(JSON.stringify(t.value))})}))}))})),r(a.Yc.ADD_REPEATERS,{repeaters:u}),r(a.Yc.ADD_FORM_FIELDS,d);case 10:case"end":return n.stop()}}),n)})))()})),Co),ta={state:Ho,getters:Ko,mutations:Xo,actions:Qo};function ea(t){return ea="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ea(t)}function na(t,e,n){return e=ra(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ra(t){var e=ia(t,"string");return"symbol"===ea(e)?e:String(e)}function ia(t,e){if("object"!==ea(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==ea(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var oa={active:window["TWILL"].STORE.parentId||0,all:window["TWILL"].STORE.parents||[]},aa={},sa=na({},a.Lp.UPDATE_PARENT,(function(t,e){t.active=e||0})),la={state:oa,getters:aa,mutations:sa},ca=n(7224),ua={groups:window["TWILL"].STORE.groups||[],groupUserMapping:window["TWILL"].STORE.groupUserMapping||[]},da={state:ua},fa=n(1483),pa=n(4084),va=n(361),ha=n.n(va),ma=n(9734),ba=n.n(ma);function ya(t){return ya="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ya(t)}function ga(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function _a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ga(Object(n),!0).forEach((function(e){wa(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ga(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function wa(t,e,n){return e=Oa(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Oa(t){var e=ka(t,"string");return"symbol"===ya(e)?e:String(e)}function ka(t,e){if("object"!==ya(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==ya(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}r.ZP.use(Di.Z),r.ZP.use(ji.Z),o.Z.registerModule("form",Vi.Z),o.Z.registerModule("publication",Hi),o.Z.registerModule("blocks",go),o.Z.registerModule("language",_o.Z),o.Z.registerModule("revision",To),o.Z.registerModule("browser",Ao.Z),o.Z.registerModule("repeaters",ta),o.Z.registerModule("parents",la),o.Z.registerModule("attributes",ca.Z),o.Z.registerModule("permissions",da),r.ZP.component("a17-fieldset",d.Z),r.ZP.component("a17-publisher",De),r.ZP.component("a17-title-editor",V),r.ZP.component("a17-blocks",Ue["default"]),r.ZP.component("a17-page-nav",Ze),r.ZP.component("a17-langswitcher",F.Z),r.ZP.component("a17-sticky-nav",w),r.ZP.component("a17-spinner",zr.Z),r.ZP.component("a17-repeater",sn),r.ZP.component("a17-browser",Rn.Z),r.ZP.component("a17-connectorfield",Bn),r.ZP.component("a17-locationfield",wn),r.ZP.component("a17-overlay",Xn),r.ZP.component("a17-previewer",mr),r.ZP.component("a17-editor",xi),r.ZP.component("a17-modal-add",$i),window["TWILL"].vm=window.vm=new r.ZP({store:o.Z,el:"#app",mixins:[fa.Z,pa.Z,Ii.Z],data:function(){return{unSubscribe:function(){return null},isFormUpdated:!1}},computed:_a(_a({},(0,i.rn)({loading:function(t){return t.form.loading},editor:function(t){return t.blocks.editor},isCustom:function(t){return t.form.isCustom}})),(0,i.Se)(["getSaveType","isEnabledSubmitOption"])),methods:{submitForm:function(){var t=this;this.isSubmitPrevented?this.shouldRetrySubmitWhenAllowed=!0:this.loading||(this.isFormUpdated=!1,this.$store.commit(a.Yc.UPDATE_FORM_LOADING,!0),this.unSubscribe(),this.$nextTick((function(){var e=t.getSaveType||document.activeElement.name;t.isEnabledSubmitOption(e)?t.$store.dispatch(s.ZP.SAVE_FORM,e).then((function(){t.mutationsSubscribe()})):(t.$store.commit(a.Yc.UPDATE_FORM_LOADING,!1),t.mutationsSubscribe())})))},confirmExit:function(t){if(this.isFormUpdated&&!this.isCustom)return"message";void 0!==window.event?window.event.cancelBubble=!0:t.cancelBubble=!0},mutationsSubscribe:function(){var t=this;this.unSubscribe=this.$store.subscribe((function(e,n){l.d.includes(e.type)&&(t.isFormUpdated=!0,t.unSubscribe())}))},watchForFormUpdates:function(t,e){var n=this,r="form"===t&&("fields"===e||"modalFields"===e),i=this.sortObjectArraysDeep(ha()(this.$store.state[t][e]),r);this.$store.watch((function(n){return n[t][e]}),(function(t){var e=n.sortObjectArraysDeep(ha()(t),r);n.isFormUpdated=!dn()(i,e),n.$store.commit(a.V1.UPDATE_HAS_UNSAVED_CHANGES,n.isFormUpdated)}),{deep:!0})},sortArrayByFirstKey:function(t){return ba()(t,(function(t){if("object"===ya(t)){var e=Object.keys(t)[0];return t[e]}return t}))},sortObjectArraysDeep:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Array.isArray(t)&&n?t=this.sortArrayByFirstKey(t):Object.keys(t).forEach((function(r){Array.isArray(t[r])?n&&(t[r]=e.sortArrayByFirstKey(t[r])):"object"===ya(t[r])&&(t[r]=e.sortObjectArraysDeep(t[r]))})),t}},mounted:function(){var t=this;window.onbeforeunload=this.confirmExit,this.$nextTick((function(){t.watchForFormUpdates("mediaLibrary","selected"),t.watchForFormUpdates("form","fields"),t.watchForFormUpdates("form","modalFields"),t.watchForFormUpdates("blocks","blocks"),t.watchForFormUpdates("browser","selected"),t.watchForFormUpdates("repeaters","repeaters")}))},beforeDestroy:function(){this.unSubscribe()},created:function(){(0,u.Z)()}}),document.addEventListener("DOMContentLoaded",c.Z)}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={id:r,loaded:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.m=t,function(){var t=[];n.O=function(e,r,i,o){if(!r){var a=1/0;for(u=0;u<t.length;u++){r=t[u][0],i=t[u][1],o=t[u][2];for(var s=!0,l=0;l<r.length;l++)(!1&o||a>=o)&&Object.keys(n.O).every((function(t){return n.O[t](r[l])}))?r.splice(l--,1):(s=!1,o<a&&(a=o));if(s){t.splice(u--,1);var c=i();void 0!==c&&(e=c)}}return e}o=o||0;for(var u=t.length;u>0&&t[u-1][2]>o;u--)t[u]=t[u-1];t[u]=[r,i,o]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.hmd=function(t){return t=Object.create(t),t.children||(t.children=[]),Object.defineProperty(t,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+t.id)}}),t}}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){n.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t}}(),function(){n.j=821}(),function(){var t={821:0};n.O.j=function(e){return 0===t[e]};var e=function(e,r){var i,o,a=r[0],s=r[1],l=r[2],c=0;if(a.some((function(e){return 0!==t[e]}))){for(i in s)n.o(s,i)&&(n.m[i]=s[i]);if(l)var u=l(n)}for(e&&e(r);c<a.length;c++)o=a[c],n.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return n.O(u)},r=self["webpackChunk_area17_twill"]=self["webpackChunk_area17_twill"]||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))}();var r=n.O(void 0,[998,64],(function(){return n(4749)}));r=n.O(r)})();